---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "grafana_oncall_integration Resource - terraform-provider-grafana"
subcategory: "OnCall"
description: |-
  Official documentation https://grafana.com/docs/oncall/latest/configure/integrations/HTTP API https://grafana.com/docs/oncall/latest/oncall-api-reference/
---

# grafana_oncall_integration (Resource)

* [Official documentation](https://grafana.com/docs/oncall/latest/configure/integrations/)
* [HTTP API](https://grafana.com/docs/oncall/latest/oncall-api-reference/)

## Example Usage

```terraform
data "grafana_team" "my_team" {
  name = "my team"
}

data "grafana_oncall_team" "my_team" {
  name = data.grafana_team.my_team.name
}

resource "grafana_oncall_integration" "test-acc-integration" {
  provider = grafana.oncall
  name     = "my integration"
  type     = "grafana"

  // Optional: specify the team to which the integration belongs
  team_id = data.grafana_oncall_team.my_team.id

  default_route {
  }
}

# Also it's possible to manage integration templates.
# Check docs to see all available templates.
resource "grafana_oncall_integration" "integration_with_templates" {
  provider = grafana.oncall
  name     = "integration_with_templates"
  type     = "webhook"

  // Optional: specify the team to which the integration belongs
  team_id = data.grafana_oncall_team.my_team.id

  default_route {
  }
  templates {
    grouping_key = "{{ payload.group_id }}"
    slack {
      title     = "Slack title"
      message   = <<-EOT
          This is example of multiline template
          {{ payload.message }}
        EOT
      image_url = "{{ payload.image_url }}"
    }
  }
}

# You can add static labels and dynamic labels to an integration with 'labels' and 'dynamic_labels
# using the 'grafana_oncall_label' datasource
data "grafana_oncall_label" "test-label" {
  provider = grafana.oncall
  key      = "LabelKey"
  value    = "LabelValue"
}

data "grafana_oncall_label" "test-dynamic-label" {
  provider = grafana.oncall
  key      = "severity"
  value    = "{{ payload.get('severity', 'unknown') }}"
}

resource "grafana_oncall_integration" "test-acc-integration" {
  provider = grafana.oncall
  name     = "my integration"
  type     = "webhook"
  default_route {}
  labels         = [data.grafana_oncall_label.test-label]
  dynamic_labels = [data.grafana_oncall_label.test-dynamic-label]
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `default_route` (Block List, Min: 1, Max: 1) The Default route for all alerts from the given integration (see [below for nested schema](#nestedblock--default_route))
- `name` (String) The name of the service integration.
- `type` (String) The type of integration. Can be grafana, grafana_alerting, webhook, alertmanager, kapacitor, fabric, newrelic, datadog, pagerduty, pingdom, elastalert, amazon_sns, curler, sentry, formatted_webhook, heartbeat, demo, manual, stackdriver, uptimerobot, sentry_platform, zabbix, prtg, slack_channel, inbound_email, direct_paging, jira, zendesk.

### Optional

- `dynamic_labels` (Block Set) Dynamic labels as key/value pairs. (see [below for nested schema](#nestedblock--dynamic_labels))
- `labels` (Block Set) Static labels as key/value pairs. (see [below for nested schema](#nestedblock--labels))
- `team_id` (String) The ID of the OnCall team (using the `grafana_oncall_team` datasource).
- `templates` (Block List, Max: 1) Jinja2 templates for Alert payload. An empty templates block will be ignored. (see [below for nested schema](#nestedblock--templates))

### Read-Only

- `id` (String) The ID of this resource.
- `link` (String) The link for using in an integrated tool.

<a id="nestedblock--default_route"></a>
### Nested Schema for `default_route`

Optional:

- `escalation_chain_id` (String) The ID of the escalation chain.
- `msteams` (Block List, Max: 1) MS teams-specific settings for a route. (see [below for nested schema](#nestedblock--default_route--msteams))
- `slack` (Block List, Max: 1) Slack-specific settings for a route. (see [below for nested schema](#nestedblock--default_route--slack))
- `telegram` (Block List, Max: 1) Telegram-specific settings for a route. (see [below for nested schema](#nestedblock--default_route--telegram))

Read-Only:

- `id` (String)

<a id="nestedblock--default_route--msteams"></a>
### Nested Schema for `default_route.msteams`

Optional:

- `enabled` (Boolean) Enable notification in MS teams. Defaults to `true`.
- `id` (String) MS teams channel id. Alerts will be directed to this channel in Microsoft teams.


<a id="nestedblock--default_route--slack"></a>
### Nested Schema for `default_route.slack`

Optional:

- `channel_id` (String) Slack channel id. Alerts will be directed to this channel in Slack.
- `enabled` (Boolean) Enable notification in Slack. Defaults to `true`.


<a id="nestedblock--default_route--telegram"></a>
### Nested Schema for `default_route.telegram`

Optional:

- `enabled` (Boolean) Enable notification in Telegram. Defaults to `true`.
- `id` (String) Telegram channel id. Alerts will be directed to this channel in Telegram.



<a id="nestedblock--dynamic_labels"></a>
### Nested Schema for `dynamic_labels`

Required:

- `key` (String)
- `value` (String)


<a id="nestedblock--labels"></a>
### Nested Schema for `labels`

Required:

- `key` (String)
- `value` (String)


<a id="nestedblock--templates"></a>
### Nested Schema for `templates`

Optional:

- `acknowledge_signal` (String) Template for sending a signal to acknowledge the Incident.
- `email` (Block List, Max: 1) Templates for Email. (see [below for nested schema](#nestedblock--templates--email))
- `grouping_key` (String) Template for the key by which alerts are grouped.
- `microsoft_teams` (Block List, Max: 1) Templates for Microsoft Teams. **NOTE**: Microsoft Teams templates are only available on Grafana Cloud. (see [below for nested schema](#nestedblock--templates--microsoft_teams))
- `mobile_app` (Block List, Max: 1) Templates for Mobile app push notifications. (see [below for nested schema](#nestedblock--templates--mobile_app))
- `phone_call` (Block List, Max: 1) Templates for Phone Call. (see [below for nested schema](#nestedblock--templates--phone_call))
- `resolve_signal` (String) Template for sending a signal to resolve the Incident.
- `slack` (Block List, Max: 1) Templates for Slack. (see [below for nested schema](#nestedblock--templates--slack))
- `sms` (Block List, Max: 1) Templates for SMS. (see [below for nested schema](#nestedblock--templates--sms))
- `source_link` (String) Template for a source link.
- `telegram` (Block List, Max: 1) Templates for Telegram. (see [below for nested schema](#nestedblock--templates--telegram))
- `web` (Block List, Max: 1) Templates for Web. (see [below for nested schema](#nestedblock--templates--web))

<a id="nestedblock--templates--email"></a>
### Nested Schema for `templates.email`

Optional:

- `message` (String) Template for Alert message.
- `title` (String) Template for Alert title.


<a id="nestedblock--templates--microsoft_teams"></a>
### Nested Schema for `templates.microsoft_teams`

Optional:

- `image_url` (String) Template for Alert image url.
- `message` (String) Template for Alert message.
- `title` (String) Template for Alert title.


<a id="nestedblock--templates--mobile_app"></a>
### Nested Schema for `templates.mobile_app`

Optional:

- `message` (String) Template for Alert message.
- `title` (String) Template for Alert title.


<a id="nestedblock--templates--phone_call"></a>
### Nested Schema for `templates.phone_call`

Optional:

- `title` (String) Template for Alert title.


<a id="nestedblock--templates--slack"></a>
### Nested Schema for `templates.slack`

Optional:

- `image_url` (String) Template for Alert image url.
- `message` (String) Template for Alert message.
- `title` (String) Template for Alert title.


<a id="nestedblock--templates--sms"></a>
### Nested Schema for `templates.sms`

Optional:

- `title` (String) Template for Alert title.


<a id="nestedblock--templates--telegram"></a>
### Nested Schema for `templates.telegram`

Optional:

- `image_url` (String) Template for Alert image url.
- `message` (String) Template for Alert message.
- `title` (String) Template for Alert title.


<a id="nestedblock--templates--web"></a>
### Nested Schema for `templates.web`

Optional:

- `image_url` (String) Template for Alert image url.
- `message` (String) Template for Alert message.
- `title` (String) Template for Alert title.

## Import

Import is supported using the following syntax:

```shell
terraform import grafana_oncall_integration.name "{{ id }}"
```
