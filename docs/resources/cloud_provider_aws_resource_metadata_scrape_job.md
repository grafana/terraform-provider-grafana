---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "grafana_cloud_provider_aws_resource_metadata_scrape_job Resource - terraform-provider-grafana"
subcategory: "Cloud Provider"
description: |-
  
---

# grafana_cloud_provider_aws_resource_metadata_scrape_job (Resource)



## Example Usage

```terraform
data "grafana_cloud_stack" "test" {
  slug = "gcloudstacktest"
}

data "aws_iam_role" "test" {
  name = "my-role"
}

resource "grafana_cloud_provider_aws_account" "test" {
  stack_id = data.grafana_cloud_stack.test.id
  role_arn = data.aws_iam_role.test.arn
  regions = [
    "us-east-1",
    "us-east-2",
    "us-west-1"
  ]
}

resource "grafana_cloud_provider_aws_resource_metadata_scrape_job" "test" {
  stack_id                = data.grafana_cloud_stack.test.id
  name                    = "my-aws-resource-metadata-scrape-job"
  aws_account_resource_id = grafana_cloud_provider_aws_account.test.resource_id

  service {
    name                    = "AWS/EC2"
    scrape_interval_seconds = 300
    resource_discovery_tag_filter {
      key   = "k8s.io/cluster-autoscaler/enabled"
      value = "true"
    }
  }

  static_labels = {
    "label1" = "value1"
    "label2" = "value2"
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `aws_account_resource_id` (String) The ID assigned by the Grafana Cloud Provider API to an AWS Account resource that should be associated with this Resource Metadata Scrape Job. This can be provided by the `resource_id` attribute of the `grafana_cloud_provider_aws_account` resource.
- `name` (String) The name of the AWS Resource Metadata Scrape Job. Part of the Terraform Resource ID.
- `stack_id` (String) The Stack ID of the Grafana Cloud instance. Part of the Terraform Resource ID.

### Optional

- `enabled` (Boolean) Whether the AWS Resource Metadata Scrape Job is enabled or not. Defaults to `true`.
- `regions_subset_override` (Set of String) A subset of the regions that are configured in the associated AWS Account resource to apply to this scrape job. If not set or empty, all of the Account resource's regions are scraped.
- `service` (Block List) One or more configuration blocks to configure AWS services for the Resource Metadata Scrape Job to scrape. Each block must have a distinct `name` attribute. When accessing this as an attribute reference, it is a list of objects. (see [below for nested schema](#nestedblock--service))
- `static_labels` (Map of String) A set of static labels to add to all metrics exported by this scrape job.

### Read-Only

- `disabled_reason` (String) When the AWS Resource Metadata Scrape Job is disabled, this will show the reason that it is in that state.
- `id` (String) The Terraform Resource ID. This has the format "{{ stack_id }}:{{ name }}".

<a id="nestedblock--service"></a>
### Nested Schema for `service`

Required:

- `name` (String) The name of the service to scrape. See https://grafana.com/docs/grafana-cloud/monitor-infrastructure/monitor-cloud-provider/aws/cloudwatch-metrics/services/ for supported services.

Optional:

- `resource_discovery_tag_filter` (Block List) One or more configuration blocks to configure tag filters applied to discovery of resource entities in the associated AWS account. When accessing this as an attribute reference, it is a list of objects. (see [below for nested schema](#nestedblock--service--resource_discovery_tag_filter))
- `scrape_interval_seconds` (Number) The interval in seconds to scrape the service. See https://grafana.com/docs/grafana-cloud/monitor-infrastructure/monitor-cloud-provider/aws/cloudwatch-metrics/services/ for supported scrape intervals. Defaults to `300`.

<a id="nestedblock--service--resource_discovery_tag_filter"></a>
### Nested Schema for `service.resource_discovery_tag_filter`

Required:

- `key` (String) The key of the tag filter.
- `value` (String) The value of the tag filter.

## Import

Import is supported using the following syntax:

```shell
terraform import grafana_cloud_provider_aws_resource_metadata_scrape_job.name "{{ stack_id }}:{{ name }}"
```
