---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "grafana_cloud_provider_aws_cloudwatch_scrape_job Resource - terraform-provider-grafana"
subcategory: "Cloud Provider"
description: |-
  
---

# grafana_cloud_provider_aws_cloudwatch_scrape_job (Resource)



## Example Usage

```terraform
data "grafana_cloud_stack" "test" {
  slug = "gcloudstacktest"
}

data "aws_iam_role" "test" {
  name = "my-role"
}

resource "grafana_cloud_provider_aws_account" "test" {
  stack_id = data.grafana_cloud_stack.test.id
  role_arn = data.aws_iam_role.test.arn
  regions = [
    "us-east-1",
    "us-east-2",
    "us-west-1"
  ]
}

resource "grafana_cloud_provider_aws_cloudwatch_scrape_job" "test" {
  stack_id = data.grafana_cloud_stack.test.id
  name = "my-cloudwatch-scrape-job"
  aws_account_resource_id = grafana_cloud_provider_aws_account.test.resource_id
  regions = grafana_cloud_provider_aws_account.regions
  service_configurations = [
    {
      name = "AWS/EC2",
      metrics = [
        {
          name = "aws_ec2_cpuutilization",
          statistics = [
            "Average",
          ],
        },
        {
          name = "aws_ec2_status_check_failed",
          statistics = [
            "Maximum",
          ],
        },
      ],
      scrape_interval_seconds = 300,
      resource_discovery_tag_filters = [
        {
          key = "k8s.io/cluster-autoscaler/enabled",
          value = "true",
        }
      ],
      tags_to_add_to_metrics = [
        "eks:cluster-name",
      ]
    },
    {
      name = "CoolApp",
      metrics = [
        {
          name = "CoolMetric",
          statistics = [
            "Maximum",
            "Sum",
          ]
        },
      ],
      scrape_interval_seconds = 300,
      is_custom_namespace = true,
    },
  ]
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `aws_account_resource_id` (String) The ID assigned by the Grafana Cloud Provider API to the AWS Account resource.
- `name` (String) The name of the CloudWatch Scrape Job. Part of the Terraform Resource ID.
- `regions` (Set of String) A set of AWS region names that this CloudWatch Scrape Job resource applies to.
- `service_configurations` (Block Set, Min: 1) A set of configurations that dictates what this CloudWatch Scrape Job resource should scrape. (see [below for nested schema](#nestedblock--service_configurations))
- `stack_id` (String) The Stack ID of the Grafana Cloud instance. Part of the Terraform Resource ID.

### Optional

- `enabled` (String) Whether the CloudWatch Scrape Job is enabled or not. Defaults to `true`.

### Read-Only

- `id` (String) The Terraform Resource ID. This has the format "{{ stack_id }}:{{ job_name }}".

<a id="nestedblock--service_configurations"></a>
### Nested Schema for `service_configurations`

Required:

- `metrics` (Block Set, Min: 1) A set of metrics to scrape. (see [below for nested schema](#nestedblock--service_configurations--metrics))
- `name` (String) The name of the service to scrape. See https://grafana.com/docs/grafana-cloud/monitor-infrastructure/aws/cloudwatch-metrics/services/ for supported services, metrics, and their statistics.

Optional:

- `is_custom_namespace` (Boolean) Whether the service name is a custom, user-generated metrics namespace, as opposed to a standard AWS metrics namespace. Defaults to `false`.
- `resource_discovery_tag_filters` (Block Set) A set of tag filters to use for resource discovery. (see [below for nested schema](#nestedblock--service_configurations--resource_discovery_tag_filters))
- `scrape_interval_seconds` (Number) The interval in seconds to scrape the service. See https://grafana.com/docs/grafana-cloud/monitor-infrastructure/aws/cloudwatch-metrics/services/ for supported scrape intervals. Defaults to `300`.
- `tags_to_add_to_metrics` (Set of String) A set of tags to add to all metrics exported by this scrape job, for use in PromQL queries.

<a id="nestedblock--service_configurations--metrics"></a>
### Nested Schema for `service_configurations.metrics`

Required:

- `name` (String) The name of the metric to scrape.
- `statistics` (Set of String) A set of statistics to scrape.


<a id="nestedblock--service_configurations--resource_discovery_tag_filters"></a>
### Nested Schema for `service_configurations.resource_discovery_tag_filters`

Required:

- `key` (String) The key of the tag filter.
- `value` (String) The value of the tag filter.

## Import

Import is supported using the following syntax:

```shell
terraform import grafana_cloud_provider_aws_cloudwatch_scrape_job.name "{{ stack_id }}:{{ job_name }}"
```
