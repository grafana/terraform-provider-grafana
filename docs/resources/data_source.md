---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "grafana_data_source Resource - terraform-provider-grafana"
subcategory: "Grafana OSS"
description: |-
  Official documentation https://grafana.com/docs/grafana/latest/datasources/HTTP API https://grafana.com/docs/grafana/latest/http_api/data_source/
  The required arguments for this resource vary depending on the type of data
  source selected (via the 'type' argument).
---

# grafana_data_source (Resource)

* [Official documentation](https://grafana.com/docs/grafana/latest/datasources/)
* [HTTP API](https://grafana.com/docs/grafana/latest/http_api/data_source/)

The required arguments for this resource vary depending on the type of data
source selected (via the 'type' argument).

## Example Usage

```terraform
resource "grafana_data_source" "arbitrary-data" {
  type = "stackdriver"
  name = "sd-arbitrary-data"

  json_data_encoded = jsonencode({
    "tokenUri"           = "https://oauth2.googleapis.com/token"
    "authenticationType" = "jwt"
    "defaultProject"     = "default-project"
    "clientEmail"        = "client-email@default-project.iam.gserviceaccount.com"
  })

  secure_json_data_encoded = jsonencode({
    "privateKey" = "-----BEGIN PRIVATE KEY-----\nprivate-key\n-----END PRIVATE KEY-----\n"
  })
}

resource "grafana_data_source" "influxdb" {
  type          = "influxdb"
  name          = "myapp-metrics"
  url           = "http://influxdb.example.net:8086/"
  username      = "myapp"
  password      = "foobarbaz"
  database_name = influxdb_database.metrics.name
}

resource "grafana_data_source" "cloudwatch" {
  type = "cloudwatch"
  name = "cw-example"

  json_data {
    default_region = "us-east-1"
    auth_type      = "keys"
  }

  secure_json_data {
    access_key = "123"
    secret_key = "456"
  }
}

resource "grafana_data_source" "prometheus" {
  type = "prometheus"
  name = "amp"
  url  = "https://aps-workspaces.eu-west-1.amazonaws.com/workspaces/ws-1234567890/"

  json_data {
    http_method     = "POST"
    sigv4_auth      = true
    sigv4_auth_type = "default"
    sigv4_region    = "eu-west-1"
  }
}

resource "grafana_data_source" "stackdriver" {
  type = "stackdriver"
  name = "sd-example"

  json_data {
    token_uri           = "https://oauth2.googleapis.com/token"
    authentication_type = "jwt"
    default_project     = "default-project"
    client_email        = "client-email@default-project.iam.gserviceaccount.com"
  }

  secure_json_data {
    private_key = "-----BEGIN PRIVATE KEY-----\nprivate-key\n-----END PRIVATE KEY-----\n"
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `name` (String) A unique name for the data source.
- `type` (String) The data source type. Must be one of the supported data source keywords.

### Optional

- `access_mode` (String) The method by which Grafana will access the data source: `proxy` or `direct`. Defaults to `proxy`.
- `basic_auth_enabled` (Boolean) Whether to enable basic auth for the data source. Defaults to `false`.
- `basic_auth_password` (String, Sensitive, Deprecated) Basic auth password. Deprecated:Use secure_json_data_encoded instead. It supports arbitrary JSON data, and therefore all attributes. This attribute is removed in Grafana 9.0+. Defaults to ``.
- `basic_auth_username` (String) Basic auth username. Defaults to ``.
- `database_name` (String) (Required by some data source types) The name of the database to use on the selected data source server. Defaults to ``.
- `http_headers` (Map of String, Sensitive) Custom HTTP headers
- `is_default` (Boolean) Whether to set the data source as default. This should only be `true` to a single data source. Defaults to `false`.
- `json_data` (Block List, Deprecated) (Required by some data source types). Deprecated: Use json_data_encoded instead. It supports arbitrary JSON data, and therefore all attributes. (see [below for nested schema](#nestedblock--json_data))
- `json_data_encoded` (String) Serialized JSON string containing the json data. Replaces the json_data attribute, this attribute can be used to pass configuration options to the data source. To figure out what options a datasource has available, see its docs or inspect the network data when saving it from the Grafana UI.
- `password` (String, Sensitive, Deprecated) (Required by some data source types) The password to use to authenticate to the data source. Deprecated: Use secure_json_data_encoded instead. It supports arbitrary JSON data, and therefore all attributes. This attribute is removed in Grafana 9.0+. Defaults to ``.
- `secure_json_data` (Block List, Deprecated) Deprecated: Use secure_json_data_encoded instead. It supports arbitrary JSON data, and therefore all attributes. (see [below for nested schema](#nestedblock--secure_json_data))
- `secure_json_data_encoded` (String, Sensitive) Serialized JSON string containing the secure json data. Replaces the secure_json_data attribute, this attribute can be used to pass secure configuration options to the data source. To figure out what options a datasource has available, see its docs or inspect the network data when saving it from the Grafana UI.
- `uid` (String) Unique identifier. If unset, this will be automatically generated.
- `url` (String) The URL for the data source. The type of URL required varies depending on the chosen data source type.
- `username` (String) (Required by some data source types) The username to use to authenticate to the data source. Defaults to ``.

### Read-Only

- `id` (String) The ID of this resource.

<a id="nestedblock--json_data"></a>
### Nested Schema for `json_data`

Optional:

- `assume_role_arn` (String) (CloudWatch, Athena) The ARN of the role to be assumed by Grafana when using the CloudWatch or Athena data source.
- `auth_type` (String) (CloudWatch, Athena) The authentication type used to access the data source.
- `authentication_type` (String) (Stackdriver) The authentication type: `jwt` or `gce`.
- `catalog` (String) (Athena) Athena catalog.
- `client_email` (String) (Stackdriver) Service account email address.
- `client_id` (String) (Azure Monitor) The service account client id.
- `cloud_name` (String) (Azure Monitor) The cloud name.
- `conn_max_lifetime` (Number) (MySQL, PostgreSQL, and MSSQL) Maximum amount of time in seconds a connection may be reused (Grafana v5.4+).
- `custom_metrics_namespaces` (String) (CloudWatch) A comma-separated list of custom namespaces to be queried by the CloudWatch data source.
- `database` (String) (Athena) Name of the database within the catalog.
- `default_bucket` (String) (InfluxDB) The default bucket for the data source.
- `default_project` (String) (Stackdriver) The default project for the data source.
- `default_region` (String) (CloudWatch, Athena) The default region for the data source.
- `derived_field` (Block List) (Loki) See https://grafana.com/docs/grafana/latest/datasources/loki/#derived-fields (see [below for nested schema](#nestedblock--json_data--derived_field))
- `encrypt` (String) (MSSQL) Connection SSL encryption handling: 'disable', 'false' or 'true'.
- `es_version` (String) (Elasticsearch) Elasticsearch semantic version (Grafana v8.0+).
- `external_id` (String) (CloudWatch, Athena) If you are assuming a role in another account, that has been created with an external ID, specify the external ID here.
- `github_url` (String) (Github) Github URL
- `graphite_version` (String) (Graphite) Graphite version.
- `http_method` (String) (Prometheus) HTTP method to use for making requests.
- `implementation` (String) (Alertmanager) Implementation of Alertmanager. Either 'cortex' or 'prometheus'
- `interval` (String) (Elasticsearch) Index date time format. nil(No Pattern), 'Hourly', 'Daily', 'Weekly', 'Monthly' or 'Yearly'.
- `log_level_field` (String) (Elasticsearch) Which field should be used to indicate the priority of the log message.
- `log_message_field` (String) (Elasticsearch) Which field should be used as the log message.
- `manage_alerts` (Boolean) (Prometheus) Manage alerts.
- `max_concurrent_shard_requests` (Number) (Elasticsearch) Maximum number of concurrent shard requests.
- `max_idle_conns` (Number) (MySQL, PostgreSQL and MSSQL) Maximum number of connections in the idle connection pool (Grafana v5.4+).
- `max_lines` (Number) (Loki) Upper limit for the number of log lines returned by Loki
- `max_open_conns` (Number) (MySQL, PostgreSQL and MSSQL) Maximum number of open connections to the database (Grafana v5.4+).
- `org_slug` (String) (Sentry) Organization slug.
- `organization` (String) (InfluxDB) An organization is a workspace for a group of users. All dashboards, tasks, buckets, members, etc., belong to an organization.
- `output_location` (String) (Athena) AWS S3 bucket to store execution outputs. If not specified, the default query result location from the Workgroup configuration will be used.
- `postgres_version` (Number) (PostgreSQL) Postgres version as a number (903/904/905/906/1000) meaning v9.3, v9.4, etc.
- `profile` (String) (CloudWatch, Athena) The credentials profile name to use when authentication type is set as 'Credentials file'.
- `query_timeout` (String) (Prometheus) Timeout for queries made to the Prometheus data source in seconds.
- `sigv4_assume_role_arn` (String) (Elasticsearch and Prometheus) Specifies the ARN of an IAM role to assume.
- `sigv4_auth` (Boolean) (Elasticsearch and Prometheus) Enable usage of SigV4.
- `sigv4_auth_type` (String) (Elasticsearch and Prometheus) The Sigv4 authentication provider to use: 'default', 'credentials' or 'keys' (AMG: 'workspace-iam-role').
- `sigv4_external_id` (String) (Elasticsearch and Prometheus) When assuming a role in another account use this external ID.
- `sigv4_profile` (String) (Elasticsearch and Prometheus) Credentials profile name, leave blank for default.
- `sigv4_region` (String) (Elasticsearch and Prometheus) AWS region to use for Sigv4.
- `ssl_mode` (String) (PostgreSQL) SSLmode. 'disable', 'require', 'verify-ca' or 'verify-full'.
- `subscription_id` (String) (Azure Monitor) The subscription id
- `tenant_id` (String) (Azure Monitor) Service account tenant ID.
- `time_field` (String) (Elasticsearch) Which field that should be used as timestamp.
- `time_interval` (String) (Prometheus, Elasticsearch, InfluxDB, MySQL, PostgreSQL, and MSSQL) Lowest interval/step value that should be used for this data source. Sometimes called "Scrape Interval" in the Grafana UI.
- `timescaledb` (Boolean) (PostgreSQL) Enable usage of TimescaleDB extension.
- `tls_auth` (Boolean) (All) Enable TLS authentication using client cert configured in secure json data.
- `tls_auth_with_ca_cert` (Boolean) (All) Enable TLS authentication using CA cert.
- `tls_configuration_method` (String) (All) SSL Certificate configuration, either by ‘file-path’ or ‘file-content’.
- `tls_skip_verify` (Boolean) (All) Controls whether a client verifies the server’s certificate chain and host name.
- `token_uri` (String) (Stackdriver) The token URI used, provided in the service account key.
- `tracing_datasource_uid` (String) (Cloudwatch) The X-Ray datasource uid to associate to this Cloudwatch datasource.
- `tsdb_resolution` (Number) (OpenTSDB) Resolution.
- `tsdb_version` (Number) (OpenTSDB) Version.
- `version` (String) (InfluxDB) InfluxQL or Flux.
- `workgroup` (String) (Athena) Workgroup to use.
- `xpack_enabled` (Boolean) (Elasticsearch) Enable X-Pack support.

<a id="nestedblock--json_data--derived_field"></a>
### Nested Schema for `json_data.derived_field`

Optional:

- `datasource_uid` (String)
- `matcher_regex` (String)
- `name` (String)
- `url` (String)



<a id="nestedblock--secure_json_data"></a>
### Nested Schema for `secure_json_data`

Optional:

- `access_key` (String, Sensitive) (CloudWatch, Athena) The access key used to access the data source.
- `access_token` (String, Sensitive) (Github) The access token used to access the data source.
- `auth_token` (String, Sensitive) (Sentry) Authorization token.
- `basic_auth_password` (String, Sensitive) (All) Password to use for basic authentication.
- `client_secret` (String, Sensitive) (Azure Monitor) Client secret for authentication.
- `password` (String, Sensitive) (All) Password to use for authentication.
- `private_key` (String, Sensitive) (Stackdriver) The service account key `private_key` to use to access the data source.
- `secret_key` (String, Sensitive) (CloudWatch, Athena) The secret key to use to access the data source.
- `sigv4_access_key` (String, Sensitive) (Elasticsearch and Prometheus) SigV4 access key. Required when using 'keys' auth provider.
- `sigv4_secret_key` (String, Sensitive) (Elasticsearch and Prometheus) SigV4 secret key. Required when using 'keys' auth provider.
- `tls_ca_cert` (String, Sensitive) (All) CA cert for out going requests.
- `tls_client_cert` (String, Sensitive) (All) TLS Client cert for outgoing requests.
- `tls_client_key` (String, Sensitive) (All) TLS Client key for outgoing requests.

## Import

Import is supported using the following syntax:

```shell
terraform import grafana_data_source.by_integer_id {{datasource id}}
terraform import grafana_data_source.by_uid {{datasource uid}}
```
