---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "grafana_synthetic_monitoring_installation Resource - terraform-provider-grafana"
subcategory: "Synthetic Monitoring"
description: |-
  Sets up Synthetic Monitoring on a Grafana cloud stack and generates a token.
  Once a Grafana Cloud stack is created, a user can either use this resource or go into the UI to install synthetic monitoring.
  This resource cannot be imported but it can be used on an existing Synthetic Monitoring installation without issues.
  Note that this resource must be used on a provider configured with Grafana Cloud credentials.
  Official documentation https://grafana.com/docs/grafana-cloud/synthetic-monitoring/installation/API documentation https://github.com/grafana/synthetic-monitoring-api-go-client/blob/main/docs/API.md#apiv1registerinstall
---

# grafana_synthetic_monitoring_installation (Resource)

Sets up Synthetic Monitoring on a Grafana cloud stack and generates a token. 
Once a Grafana Cloud stack is created, a user can either use this resource or go into the UI to install synthetic monitoring.
This resource cannot be imported but it can be used on an existing Synthetic Monitoring installation without issues.

**Note that this resource must be used on a provider configured with Grafana Cloud credentials.**

* [Official documentation](https://grafana.com/docs/grafana-cloud/synthetic-monitoring/installation/)
* [API documentation](https://github.com/grafana/synthetic-monitoring-api-go-client/blob/main/docs/API.md#apiv1registerinstall)

## Example Usage

```terraform
resource "grafana_cloud_stack" "sm_stack" {
  name        = "<stack-name>"
  slug        = "<stack-slug>"
  region_slug = "us"
}

resource "grafana_cloud_api_key" "metrics_publish" {
  name           = "MetricsPublisherForSM"
  role           = "MetricsPublisher"
  cloud_org_slug = "<org-slug>"
}

resource "grafana_synthetic_monitoring_installation" "sm_stack" {
  stack_id = grafana_cloud_stack.sm_stack.id
}

// Create a new provider instance to interact with Synthetic Monitoring
provider "grafana" {
  alias           = "sm"
  sm_access_token = grafana_synthetic_monitoring_installation.sm_stack.sm_access_token
  sm_url          = grafana_synthetic_monitoring_installation.sm_stack.stack_sm_api_url
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `metrics_publisher_key` (String, Sensitive) The Cloud API Key with the `MetricsPublisher` role used to publish metrics to the SM API
- `stack_id` (String) The ID or slug of the stack to install SM on.

### Optional

- `logs_instance_id` (Number, Deprecated) Deprecated: Not used anymore.
- `metrics_instance_id` (Number, Deprecated) Deprecated: Not used anymore.
- `stack_sm_api_url` (String) The URL of the SM API to install SM on. This depends on the stack region, find the list of API URLs here: https://grafana.com/docs/grafana-cloud/synthetic-monitoring/private-probes/#probe-api-server-url. A static mapping exists in the provider but it may not contain all the regions. If it does contain the stack's region, this field is computed automatically and readable.

### Read-Only

- `id` (String) The ID of this resource.
- `sm_access_token` (String) Generated token to access the SM API.
