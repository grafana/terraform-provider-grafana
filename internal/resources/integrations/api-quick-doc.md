base path: ``


# List integrations
- method GET
- path /grafana-easystart-app/integrations-api-editor/integrations
- parameters:
    - `installed=true` for only the installed one
- expected:
    - code 200
    - example body:
    ```
    {"data":{"docker":{"name":"Docker","slug":"docker","version":"1.3.4","overview":"Docker is a popular open-source platform that enables developers to create, deploy, and run applications in a virtualized environment called a container. It allows developers to package an application with all its dependencies, libraries, and other components required to run it, into a single container image. The Docker integration collects metrics and logs from a Docker instance and provides useful pre-built dashboards to monitor them. \n\n**Links**  \n[Docker mixin](https://github.com/grafana/jsonnet-libs/tree/master/docker-mixin)  \n[Docker docs](https://grafana.com/docs/grafana-cloud/data-configuration/integrations/integration-reference/integration-docker/)  \n","logo":{"dark_theme_url":"https://storage.googleapis.com/grafanalabs-integration-logos/docker.png","light_theme_url":"https://storage.googleapis.com/grafanalabs-integration-logos/docker.png"},"type":"agent","installation":{"version":"1.3.4","installed_on":"2025-03-28T18:26:54Z"},"search_keywords":["container","deployment","docker"],"categories":["Servers and VMs"],"dashboard_folder":"Integration - Docker","has_update":false,"metrics_check_query":"","logs_check_query":"","rule_namespace":"integrations-docker"},"linux-node":{"name":"Linux Server","slug":"linux-node","version":"1.6.1","overview":"Linux is a family of open-source Unix-like operating systems based on the Linux kernel. Linux is the leading operating system on servers, and is one of the most prominent examples of free and open-source software collaboration.\n\nLinux Server integration for Grafana Cloud enables you to collect metrics related to the operating system running on a node, including aspects like CPU usage, load average, memory usage, and disk and networking I/O using node_exporter integration. It also allows you to use Grafana Alloy to scrape logs.\n\n**Links**  \n[Linux Server mixin](https://github.com/grafana/node_exporter/tree/master/docs/node-mixin/lib/linux)  \n[Linux Server docs](https://grafana.com/docs/grafana-cloud/data-configuration/integrations/integration-reference/integration-linux-node/)   \n[Learning journey: Monitor a Linux server in Grafana Cloud](https://grafana.com/docs/learning-journeys/linux-server-integration/)\n","logo":{"dark_theme_url":"https://storage.googleapis.com/grafanalabs-integration-logos/linux.png","light_theme_url":"https://storage.googleapis.com/grafanalabs-integration-logos/linux.png"},"type":"agent","installation":{"version":"1.6.1","installed_on":"2025-04-27T17:06:08Z"},"search_keywords":["operating system","server","linux","node","linux-node"],"categories":["Servers and VMs","Operating System"],"dashboard_folder":"Integration - Linux Node","has_update":false,"metrics_check_query":"","logs_check_query":"","rule_namespace":"integrations-linux-node"},"traefik":{"name":"Traefik","slug":"traefik","version":"0.0.6","overview":"Traefik is a dynamic load balancer designed for ease of configuration, especially in dynamic environments. It supports automatic discovery of services, metrics, tracing, and has Let's Encrypt support out of the box. Traefik provides a “ready to go” system for serving production traffic with these additions.\n\n**Links**  \n[Traefik mixin](https://github.com/grafana/jsonnet-libs/tree/master/traefik-mixin)  \n[Traefik docs](https://grafana.com/docs/grafana-cloud/data-configuration/integrations/integration-reference/integration-traefik/)\n","logo":{"dark_theme_url":"https://storage.googleapis.com/grafanalabs-integration-logos/traefik.png","light_theme_url":"https://storage.googleapis.com/grafanalabs-integration-logos/traefik.png"},"type":"agent","installation":{"version":"0.0.6","installed_on":"2023-11-04T15:32:35Z"},"search_keywords":["load","balancer","networking","traefik"],"categories":["Networking"],"dashboard_folder":"Integration - Traefik","has_update":false,"metrics_check_query":"","logs_check_query":"","rule_namespace":""},"windows-exporter":{"name":"Windows","slug":"windows-exporter","version":"1.1.5","overview":"Monitor Windows instances using Grafana Alloy. The integration comes with pre installed dashboards, which give an overview of your Windows' fleet at once, a single host overview, as well as additional dashboards that provide more metrics for further system performance analysis.\nThe integration also provides dashboard showing Windows event logs.\n\n**Links**  \n[Windows mixin](https://github.com/grafana/jsonnet-libs/tree/master/windows-mixin)  \n[Windows docs](https://grafana.com/docs/grafana-cloud/data-configuration/integrations/integration-reference/integration-windows-exporter/)  \n","logo":{"dark_theme_url":"https://storage.googleapis.com/grafanalabs-integration-logos/windows.png","light_theme_url":"https://storage.googleapis.com/grafanalabs-integration-logos/windows.png"},"type":"agent","installation":{"version":"1.1.5","installed_on":"2025-05-15T09:38:02Z"},"search_keywords":["operating system","windows","microsoft","windows-exporter"],"categories":["Operating System","Servers and VMs"],"dashboard_folder":"Integration - Windows Exporter","has_update":false,"metrics_check_query":"","logs_check_query":"","rule_namespace":"integrations-windows-exporter"}}}
    ```

# Get one integration state
- method GET
- path /grafana-easystart-app/integrations-api-editor/integrations/{slug}
- parameters:
    - `{slug}` the integration
- expected:
    - code 200
    - example body:
    ```
    {"data":{"name":"Docker","slug":"docker","version":"1.3.4","overview":"Docker is a popular open-source platform that enables developers to create, deploy, and run applications in a virtualized environment called a container. It allows developers to package an application with all its dependencies, libraries, and other components required to run it, into a single container image. The Docker integration collects metrics and logs from a Docker instance and provides useful pre-built dashboards to monitor them. \n\n**Links**  \n[Docker mixin](https://github.com/grafana/jsonnet-libs/tree/master/docker-mixin)  \n[Docker docs](https://grafana.com/docs/grafana-cloud/data-configuration/integrations/integration-reference/integration-docker/)  \n","logo":{"dark_theme_url":"https://storage.googleapis.com/grafanalabs-integration-logos/docker.png","light_theme_url":"https://storage.googleapis.com/grafanalabs-integration-logos/docker.png"},"type":"agent","installation":{"version":"1.3.4","installed_on":"2025-03-28T18:26:54Z","configuration":{"configurable_logs":{"logs_disabled":false},"configurable_alerts":{"alerts_disabled":false}}},"search_keywords":null,"categories":["Servers and VMs"],"dashboard_folder":"Integration - Docker","has_update":false,"metrics_check_query":"vector(1) and on() ((count(up{job=\"integrations/docker\"} == 1) \u003e 0) and (absent(absent(machine_scrape_error{job=\"integrations/docker\"})))) or vector(0) and on() ((count(up{job=\"integrations/docker\"}) \u003e 0) and (absent(machine_scrape_error{job=\"integrations/docker\"})))","logs_check_query":"sum(count_over_time({job=\"integrations/docker\"}[5m]))","rule_namespace":"","agent_configuration":{"supported_platforms":["linux"]},"metrics":{"status":"available","available_metrics":[{"name":"container_cpu_usage_seconds_total","type":"counter","description":"Cumulative cpu time consumed in seconds."},{"name":"container_fs_reads_total","type":"counter","description":"Cumulative count of reads completed"},{"name":"container_fs_usage_bytes","type":"gauge","description":"Number of bytes that are consumed by the container on this filesystem."},{"name":"container_fs_writes_total","type":"counter","description":"Cumulative count of writes completed"},{"name":"container_last_seen","type":"gauge","description":"Last time a container was seen by the exporter"},{"name":"container_memory_usage_bytes","type":"gauge","description":"Current memory usage in bytes, including all memory regardless of when it was accessed"},{"name":"container_network_receive_bytes_total","type":"counter","description":"Cumulative count of bytes received"},{"name":"container_network_receive_errors_total","type":"counter","description":"Cumulative count of errors encountered while receiving"},{"name":"container_network_receive_packets_dropped_total","type":"counter","description":"Cumulative count of packets dropped while receiving"},{"name":"container_network_transmit_bytes_total","type":"counter","description":"Cumulative count of bytes transmitted"},{"name":"container_network_transmit_errors_total","type":"counter","description":"Cumulative count of errors encountered while transmitting"},{"name":"container_network_transmit_packets_dropped_total","type":"counter","description":"Cumulative count of packets dropped while transmitting"},{"name":"container_spec_memory_reservation_limit_bytes","type":"gauge","description":"Memory reservation limit for the container."},{"name":"machine_memory_bytes","type":"gauge","description":"Amount of memory installed on the machine."},{"name":"machine_scrape_error","type":"gauge","description":"1 if there was an error while getting machine metrics, 0 otherwise."},{"name":"up"}]},"rules":{"status":"available","available_rules":[{"namespace":"integrations-docker","group":"asserts-integration-docker.rules","name":"asserts:resource:usage"},{"namespace":"integrations-docker","group":"asserts-integration-docker.rules","name":"asserts:resource:gauge"},{"namespace":"integrations-docker","group":"asserts-integration-docker.rules","name":"asserts:resource:total"},{"namespace":"integrations-docker","group":"asserts-integration-docker.rules","name":"asserts:resource:total"},{"namespace":"integrations-docker","group":"asserts-integration-docker.rules","name":"asserts:resource:gauge"}]},"alerts":{"status":"not_supported"},"logs":{"status":"available"},"traces":{"status":"not_supported"},"asserts":{"status":"available"},"dashboards":{"status":"available","screenshots":[{"url":"https://storage.googleapis.com/grafanalabs-integration-assets/docker/screenshots/docker-1.2.png","sort_order":1,"description":"Overview \u0026 Compute"},{"url":"https://storage.googleapis.com/grafanalabs-integration-assets/docker/screenshots/docker-logs-1.2.png","sort_order":2,"description":"Logs"}],"folder_name":"Integration - Docker"},"configuration_defaults":{"enable_logs_toggle":true,"enable_alerts_toggle":false,"configurable_logs_defaults":{"logs_disabled":false},"configurable_alerts_defaults":{"alerts_disabled":false}}}}
    ```

# Install one integration
## Get the dashboards
- method POST
- path /api/plugin-proxy/grafana-easystart-app/integrations-api-admin/integrations/{slug}/dashboards
- parameters:
    - `{slug}` the integration
- body example:
    ```
    {"configuration":{"configurable_logs":{"logs_disabled":false}}}
    ```
- expected:
    - code 200
    - example body
    ```
    {"data":[{"dashboard":{"__inputs":[],"__requires":[],"annotations":{"list":[]},"description":"","editable":false,"gnetId":null,"graphTooltip":0,"hideControls":false,"id":null,"links":[{"asDropdown":false,"icon":"external link","includeVars":true,"keepTime":true,"tags":["apache-activemq-integration"],"targetBlank":false,"title":"Other Apache ActiveMQ dashboards","type":"dashboards","url":""}],"panels":[{"datasource":{"type":"datasource","uid":"-- Mixed --"},"description":"Shows if metrics are being received for the selected time range.","fieldConfig":{"defaults":{"color":{"fixedColor":"text","mode":"fixed"},"mappings":[{"options":{"match":"null","result":{"color":"light-red","index":0,"text":"No metrics received - Check configuration"}},"type":"special"},{"options":{"from":0,"result":{"color":"light-red","index":1,"text":"Failed to collect metrics"},"to":0},"type":"range"},{"options":{"from":1,"result":{"color":"light-green","index":2,"text":"Receiving metrics"},"to":1000000},"type":"range"}],"noValue":"No data","unit":"string"}},"gridPos":{"h":2,"w":8,"x":0,"y":0},"options":{"colorMode":"background","graphMode":"none","reduceOptions":{"calcs":["lastNotNull"]}},"pluginVersion":"v10.0.0","targets":[{"datasource":{"type":"prometheus","uid":"$prometheus_datasource"},"expr":"sum(up{job=~\"$job\"})\n"}],"title":"Metrics","type":"stat"},{"datasource":{"type":"datasource","uid":"-- Mixed --"},"description":"Shows the timestamp of the latest metrics received for this integration in the last 24 hours.","fieldConfig":{"defaults":{"color":{"fixedColor":"text","mode":"fixed"},"noValue":"No data","unit":"dateTimeFromNow"}},"gridPos":{"h":2,"w":8,"x":8,"y":0},"options":{"colorMode":"background","graphMode":"none","reduceOptions":{"calcs":["lastNotNull"],"fields":"Time"}},"pluginVersion":"v10.0.0","targets":[{"datasource":{"type":"prometheus","uid":"$prometheus_datasource"},"expr":"sum(up{job=~\"$job\"})\n"}],"timeFrom":"now-24h","title":"Latest metrics received","type":"stat"},{"datasource":{"type":"datasource","uid":"-- Mixed --"},"description":"Shows the installed version of this integration.","fieldConfig":{"defaults":{"color":{"fixedColor":"text","mode":"fixed"},"noValue":"1.0.1","unit":"string"}},"gridPos":{"h":2,"w":8,"x":16,"y":0},"pluginVersion":"v10.0.0","title":"Integration version","type":"stat"},{"datasource":{"uid":"${prometheus_datasource}"},"description":"Number of clusters that are reporting metrics from ActiveMQ.","fieldConfig":{"defaults":{"color":{"mode":"fixed"},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null}]},"unit":"none"},"overrides":[]},"gridPos":{"h":4,"w":6,"x":0,"y":3},"id":2,"options":{"colorMode":"none","graphMode":"area","justifyMode":"auto","orientation":"auto","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"textMode":"auto"},"pluginVersion":"10.2.0-60139","targets":[{"datasource":{"uid":"${prometheus_datasource}"},"expr":"count (activemq_memory_usage_ratio{job=~\"$job\", cluster=~\"$cluster\", activemq_cluster=~\"$activemq_cluster\"})","format":"time_series","intervalFactor":2,"legendFormat":"__auto"}],"title":"Clusters","type":"stat"},{"datasource":{"uid":"${prometheus_datasource}"},"description":"Number of broker instances across clusters.","fieldConfig":{"defaults":{"color":{"mode":"fixed"},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null}]},"unit":"none"},"overrides":[]},"gridPos":{"h":4,"w":6,"x":6,"y":3},"id":3,"options":{"colorMode":"none","graphMode":"area","justifyMode":"auto","orientation":"auto","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"textMode":"auto"},"pluginVersion":"10.2.0-60139","targets":[{"datasource":{"uid":"${prometheus_datasource}"},"expr":"count (activemq_memory_usage_ratio{job=~\"$job\", cluster=~\"$cluster\", activemq_cluster=~\"$activemq_cluster\"})","format":"time_series","intervalFactor":2,"legendFormat":"__auto"}],"title":"Brokers","type":"stat"},{"datasource":{"uid":"${prometheus_datasource}"},"description":"Number of message producers active on destinations across clusters.","fieldConfig":{"defaults":{"color":{"mode":"fixed"},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null}]},"unit":"none"},"overrides":[]},"gridPos":{"h":4,"w":6,"x":12,"y":3},"id":4,"options":{"colorMode":"none","graphMode":"area","justifyMode":"auto","orientation":"auto","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"textMode":"auto"},"pluginVersion":"10.2.0-60139","targets":[{"datasource":{"uid":"${prometheus_datasource}"},"expr":"sum (activemq_queue_producer_count{job=~\"$job\", cluster=~\"$cluster\", activemq_cluster=~\"$activemq_cluster\"}) + sum (activemq_topic_producer_count{job=~\"$job\", cluster=~\"$cluster\", activemq_cluster=~\"$activemq_cluster\",destination!~\"ActiveMQ.Advisory.*\"})","format":"time_series","intervalFactor":2,"legendFormat":"__auto"}],"title":"Producers","type":"stat"},{"datasource":{"uid":"${prometheus_datasource}"},"description":"The number of consumers subscribed to destinations across clusters.","fieldConfig":{"defaults":{"color":{"mode":"fixed"},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null}]},"unit":"none"},"overrides":[]},"gridPos":{"h":4,"w":6,"x":18,"y":3},"id":5,"options":{"colorMode":"none","graphMode":"area","justifyMode":"auto","orientation":"auto","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"textMode":"auto"},"pluginVersion":"10.2.0-60139","targets":[{"datasource":{"uid":"${prometheus_datasource}"},"expr":"sum (activemq_queue_consumer_count{job=~\"$job\", cluster=~\"$cluster\", activemq_cluster=~\"$activemq_cluster\"}) + sum (activemq_topic_consumer_count{job=~\"$job\", cluster=~\"$cluster\", activemq_cluster=~\"$activemq_cluster\",destination!~\"ActiveMQ.Advisory.*\"})","format":"time_series","intervalFactor":2,"legendFormat":"__auto"}],"title":"Consumers","type":"stat"},{"datasource":{"uid":"${prometheus_datasource}"},"description":"Number of messages that have been sent to destinations in a cluster","fieldConfig":{"defaults":{"color":{"fixedColor":"#C8F2C2","mode":"palette-classic"},"custom":{"axisCenteredZero":false,"axisColorMode":"text","axisLabel":"","axisPlacement":"auto","axisShow":false,"barAlignment":0,"drawStyle":"line","fillOpacity":25,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"insertNulls":false,"lineInterpolation":"smooth","lineWidth":2,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"never","spanNulls":false,"stacking":{"group":"A","mode":"normal"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null}]},"unit":"none"},"overrides":[]},"gridPos":{"h":8,"w":12,"x":0,"y":9},"id":6,"options":{"legend":{"calcs":[],"displayMode":"list","placement":"right","showLegend":true},"tooltip":{"mode":"multi","sort":"desc"}},"targets":[{"datasource":{"uid":"${prometheus_datasource}"},"expr":"sum by (activemq_cluster, job) (increase(activemq_queue_enqueue_count{job=~\"$job\", cluster=~\"$cluster\", activemq_cluster=~\"$activemq_cluster\"}[$__interval:])) + sum by (activemq_cluster, job) (increase(activemq_topic_enqueue_count{job=~\"$job\", cluster=~\"$cluster\", activemq_cluster=~\"$activemq_cluster\", destination!~\"ActiveMQ.Advisory.*\"}[$__interval:]))","format":"time_series","interval":"1m","intervalFactor":2,"legendFormat":"{{activemq_cluster}}"}],"title":"Enqueue / $__interval","type":"timeseries"},{"datasource":{"uid":"${prometheus_datasource}"},"description":"Number of messages that have been acknowledged (and removed) from destinations in a cluster.","fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisCenteredZero":false,"axisColorMode":"text","axisLabel":"","axisPlacement":"auto","axisShow":false,"barAlignment":0,"drawStyle":"line","fillOpacity":25,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"insertNulls":false,"lineInterpolation":"smooth","lineWidth":2,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"never","spanNulls":false,"stacking":{"group":"A","mode":"normal"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null}]},"unit":"none"},"overrides":[]},"gridPos":{"h":8,"w":12,"x":12,"y":9},"id":7,"options":{"legend":{"calcs":[],"displayMode":"list","placement":"right","showLegend":true},"tooltip":{"mode":"multi","sort":"desc"}},"targets":[{"datasource":{"uid":"${prometheus_datasource}"},"expr":"sum by (activemq_cluster, job) (increase(activemq_queue_dequeue_count{job=~\"$job\", cluster=~\"$cluster\", activemq_cluster=~\"$activemq_cluster\"}[$__interval:])) + sum by (activemq_cluster, job) (increase(activemq_topic_dequeue_count{job=~\"$job\", cluster=~\"$cluster\", activemq_cluster=~\"$activemq_cluster\", destination!~\"ActiveMQ.Advisory.*\"}[$__interval:]))","format":"time_series","interval":"1m","intervalFactor":2,"legendFormat":"{{activemq_cluster}}"}],"title":"Dequeue / $__interval","type":"timeseries"},{"datasource":{"uid":"${prometheus_datasource}"},"description":"Average percentage of temporary memory used across clusters.","fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"mappings":[],"max":1,"min":0,"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"#EAB839","value":50},{"color":"red","value":70}]},"unit":"percentunit"},"overrides":[]},"gridPos":{"h":10,"w":8,"x":0,"y":17},"id":8,"options":{"displayMode":"gradient","minVizHeight":10,"minVizWidth":0,"orientation":"horizontal","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"showUnfilled":false,"text":{},"valueMode":"color"},"pluginVersion":"10.2.0-60139","targets":[{"datasource":{"uid":"${prometheus_datasource}"},"expr":"avg by (activemq_cluster, job) (activemq_temp_usage_ratio{job=~\"$job\", cluster=~\"$cluster\", activemq_cluster=~\"$activemq_cluster\"})","format":"time_series","intervalFactor":2,"legendFormat":"{{activemq_cluster}}"}],"title":"Average temporary memory usage","type":"bargauge"},{"datasource":{"uid":"${prometheus_datasource}"},"description":"Average percentage of store memory used across clusters.","fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"mappings":[],"max":1,"min":0,"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"#EAB839","value":50},{"color":"red","value":70}]},"unit":"percentunit"},"overrides":[]},"gridPos":{"h":10,"w":8,"x":8,"y":17},"id":9,"options":{"displayMode":"gradient","minVizHeight":10,"minVizWidth":0,"orientation":"horizontal","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"showUnfilled":false,"valueMode":"color"},"pluginVersion":"10.2.0-60139","targets":[{"datasource":{"uid":"${prometheus_datasource}"},"expr":"avg by (activemq_cluster, job) (activemq_store_usage_ratio{job=~\"$job\", cluster=~\"$cluster\", activemq_cluster=~\"$activemq_cluster\"})","format":"time_series","intervalFactor":2,"legendFormat":"{{activemq_cluster}}"}],"title":"Average store memory usage","type":"bargauge"},{"datasource":{"uid":"${prometheus_datasource}"},"description":"Average percentage of broker memory used across clusters.","fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"mappings":[],"max":1,"min":0,"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"#EAB839","value":50},{"color":"red","value":70}]},"unit":"percentunit"},"overrides":[]},"gridPos":{"h":10,"w":8,"x":16,"y":17},"id":10,"options":{"displayMode":"gradient","minVizHeight":10,"minVizWidth":0,"orientation":"horizontal","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"showUnfilled":false,"valueMode":"color"},"pluginVersion":"10.2.0-60139","targets":[{"datasource":{"uid":"${prometheus_datasource}"},"expr":"avg by (activemq_cluster, job) (activemq_memory_usage_ratio{job=~\"$job\", cluster=~\"$cluster\", activemq_cluster=~\"$activemq_cluster\"})","format":"time_series","intervalFactor":2,"legendFormat":"{{activemq_cluster}}"}],"title":"Average broker memory usage","type":"bargauge"}],"refresh":"30s","rows":[],"schemaVersion":14,"style":"dark","tags":["apache-activemq-integration"],"templating":{"list":[{"current":{},"hide":0,"label":"Data source","name":"prometheus_datasource","options":[],"query":"prometheus","refresh":1,"regex":"(?!grafanacloud-usage|grafanacloud-ml-metrics).+","type":"datasource"},{"allValue":".+","current":{},"datasource":{"uid":"${prometheus_datasource}"},"hide":0,"includeAll":true,"label":"Job","multi":true,"name":"job","options":[],"query":"label_values(activemq_topic_producer_count,job)","refresh":2,"regex":"","sort":0,"tagValuesQuery":"","tags":[],"tagsQuery":"","type":"query","useTags":false},{"allValue":".*","current":{},"datasource":{"uid":"${prometheus_datasource}"},"hide":0,"includeAll":true,"label":"Cluster","multi":true,"name":"cluster","options":[],"query":"label_values(activemq_memory_usage_ratio{job=~\"$job\", cluster=~\"$cluster\"},cluster)","refresh":2,"regex":"","sort":0,"tagValuesQuery":"","tags":[],"tagsQuery":"","type":"query","useTags":false},{"allValue":".+","current":{},"datasource":{"uid":"${prometheus_datasource}"},"hide":0,"includeAll":true,"label":"ActiveMQ cluster","multi":true,"name":"activemq_cluster","options":[],"query":"label_values(activemq_memory_usage_ratio{job=~\"$job\", cluster=~\"$cluster\"},activemq_cluster)","refresh":2,"regex":"","sort":0,"tagValuesQuery":"","tags":[],"tagsQuery":"","type":"query","useTags":false}]},"time":{"from":"now-30m","to":"now"},"timepicker":{"refresh_intervals":["5s","10s","30s","1m","5m","15m","30m","1h","2h","1d"],"time_options":["5m","15m","1h","6h","12h","24h","2d","7d","30d"]},"timezone":"default","title":"Apache ActiveMQ cluster overview","uid":"apache-activemq-cluster-overview","version":0},"folder_name":"Integration - Apache ActiveMQ","overwrite":true},{"dashboard":{"__inputs":[],"__requires":[],"annotations":{"list":[]},"description":"","editable":false,"gnetId":null,"graphTooltip":0,"hideControls":false,"id":null,"links":[{"asDropdown":false,"icon":"external link","includeVars":true,"keepTime":true,"tags":["apache-activemq-integration"],"targetBlank":false,"title":"Other Apache ActiveMQ dashboards","type":"dashboards","url":""}],"panels":[{"datasource":{"uid":"${prometheus_datasource}"},"description":"The percentage of memory used by both topics and queues across brokers.","fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"#EAB839","value":50},{"color":"red","value":70}]},"unit":"percentunit"},"overrides":[]},"gridPos":{"h":4,"w":6,"x":0,"y":0},"id":2,"options":{"minVizHeight":75,"minVizWidth":75,"orientation":"auto","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"showThresholdLabels":false,"showThresholdMarkers":true},"pluginVersion":"10.2.0-60139","targets":[{"datasource":{"uid":"${prometheus_datasource}"},"expr":"avg (activemq_memory_usage_ratio{job=~\"$job\", cluster=~\"$cluster\", activemq_cluster=~\"$activemq_cluster\", instance=~\"$instance\"})","format":"time_series","intervalFactor":2,"legendFormat":"{{activemq_cluster}} - {{instance}}"}],"title":"Average broker memory usage","type":"gauge"},{"datasource":{"uid":"${prometheus_datasource}"},"description":"The percentage of store memory used by both topics and queues across brokers.","fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"#EAB839","value":50},{"color":"red","value":70}]},"unit":"percentunit"},"overrides":[]},"gridPos":{"h":4,"w":6,"x":6,"y":0},"id":3,"options":{"minVizHeight":75,"minVizWidth":75,"orientation":"auto","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"showThresholdLabels":false,"showThresholdMarkers":true},"pluginVersion":"10.2.0-60139","targets":[{"datasource":{"uid":"${prometheus_datasource}"},"expr":"avg (activemq_store_usage_ratio{job=~\"$job\", cluster=~\"$cluster\", activemq_cluster=~\"$activemq_cluster\", instance=~\"$instance\"})","format":"time_series","intervalFactor":2,"legendFormat":"__auto"}],"title":"Average store memory usage","type":"gauge"},{"datasource":{"uid":"${prometheus_datasource}"},"description":"The percentage of temporary memory used by both topics and queues across brokers.","fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"#EAB839","value":50},{"color":"red","value":70}]},"unit":"percentunit"},"overrides":[]},"gridPos":{"h":4,"w":6,"x":12,"y":0},"id":4,"options":{"minVizHeight":75,"minVizWidth":75,"orientation":"auto","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"showThresholdLabels":false,"showThresholdMarkers":true},"pluginVersion":"10.2.0-60139","targets":[{"datasource":{"uid":"${prometheus_datasource}"},"expr":"avg (activemq_temp_usage_ratio{job=~\"$job\", cluster=~\"$cluster\", activemq_cluster=~\"$activemq_cluster\", instance=~\"$instance\"})","format":"time_series","intervalFactor":2,"legendFormat":"__auto"}],"title":"Average temporary memory usage","type":"gauge"},{"datasource":{"uid":"${prometheus_datasource}"},"description":"Recent number of unacknowledged messages on the broker.","fieldConfig":{"defaults":{"color":{"mode":"fixed"},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null}]},"unit":"none"},"overrides":[]},"gridPos":{"h":4,"w":6,"x":18,"y":0},"id":5,"options":{"colorMode":"none","graphMode":"area","justifyMode":"auto","orientation":"auto","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"textMode":"auto"},"pluginVersion":"10.2.0-60139","targets":[{"datasource":{"uid":"${prometheus_datasource}"},"expr":"sum (increase(activemq_message_total{job=~\"$job\", cluster=~\"$cluster\", activemq_cluster=~\"$activemq_cluster\", instance=~\"$instance\"}[$__interval:]))","format":"time_series","interval":"1m","intervalFactor":2,"legendFormat":"__auto"}],"title":"Unacknowledged messages / $__interval","type":"stat"},{"datasource":{"uid":"${prometheus_datasource}"},"description":"Firing alerts for Apache ActiveMQ environment.","gridPos":{"h":6,"w":12,"x":0,"y":4},"id":6,"options":{"alertInstanceLabelFilter":"{job=~\"${job:regex}\", cluster=~\"${cluster:regex}\", activemq_cluster=~\"${activemq_cluster:regex}\", instance=~\"${instance:regex}\"}","alertName":"","dashboardAlerts":false,"datasource":{"uid":"${prometheus_datasource}"},"groupBy":[],"groupMode":"default","maxItems":5,"sortOrder":1,"stateFilter":{"error":true,"firing":true,"noData":true,"normal":true,"pending":true},"viewMode":"list"},"targets":[],"title":"ActiveMQ alerts","type":"alertlist"},{"datasource":{"uid":"${prometheus_datasource}"},"description":"The number of producers attached to destinations.","fieldConfig":{"defaults":{"color":{"mode":"fixed"},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null}]},"unit":"none"},"overrides":[]},"gridPos":{"h":6,"w":6,"x":12,"y":4},"id":7,"options":{"colorMode":"none","graphMode":"area","justifyMode":"auto","orientation":"auto","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"textMode":"auto"},"pluginVersion":"10.2.0-60139","targets":[{"datasource":{"uid":"${prometheus_datasource}"},"expr":"sum (activemq_queue_producer_count{job=~\"$job\", cluster=~\"$cluster\", activemq_cluster=~\"$activemq_cluster\", instance=~\"$instance\"}) + sum (activemq_topic_producer_count{job=~\"$job\", cluster=~\"$cluster\", activemq_cluster=~\"$activemq_cluster\", instance=~\"$instance\", destination!~\"ActiveMQ.Advisory.*\"})","format":"time_series","intervalFactor":2,"legendFormat":"__auto"}],"title":"Producers","type":"stat"},{"datasource":{"uid":"${prometheus_datasource}"},"description":"The number of consumers subscribed to destinations on the broker.","fieldConfig":{"defaults":{"color":{"mode":"fixed"},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null}]},"unit":"none"},"overrides":[]},"gridPos":{"h":6,"w":6,"x":18,"y":4},"id":8,"options":{"colorMode":"none","graphMode":"area","justifyMode":"auto","orientation":"auto","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"textMode":"auto"},"pluginVersion":"10.2.0-60139","targets":[{"datasource":{"uid":"${prometheus_datasource}"},"expr":"sum (activemq_queue_consumer_count{job=~\"$job\", cluster=~\"$cluster\", activemq_cluster=~\"$activemq_cluster\", instance=~\"$instance\"}) + sum (activemq_topic_consumer_count{job=~\"$job\", cluster=~\"$cluster\", activemq_cluster=~\"$activemq_cluster\", instance=~\"$instance\", destination!~\"ActiveMQ.Advisory.*\"})","format":"time_series","intervalFactor":2,"legendFormat":"__auto"}],"title":"Consumers","type":"stat"},{"datasource":{"uid":"${prometheus_datasource}"},"description":"Number of messages on queue destinations, including any that have been dispatched but not acknowledged.","fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisCenteredZero":false,"axisColorMode":"text","axisLabel":"","axisPlacement":"auto","axisShow":false,"barAlignment":0,"drawStyle":"line","fillOpacity":25,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"insertNulls":false,"lineInterpolation":"smooth","lineWidth":2,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"never","spanNulls":false,"stacking":{"group":"A","mode":"normal"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null}]},"unit":"none"},"overrides":[]},"gridPos":{"h":8,"w":12,"x":0,"y":10},"id":9,"options":{"legend":{"calcs":[],"displayMode":"list","placement":"right","showLegend":true},"tooltip":{"mode":"multi","sort":"desc"}},"targets":[{"datasource":{"uid":"${prometheus_datasource}"},"expr":"sum by(instance, activemq_cluster, job) (activemq_queue_queue_size{job=~\"$job\", cluster=~\"$cluster\", activemq_cluster=~\"$activemq_cluster\", instance=~\"$instance\"})","format":"time_series","intervalFactor":2,"legendFormat":"{{activemq_cluster}} - {{instance}}"}],"title":"Queue size","type":"timeseries"},{"datasource":{"uid":"${prometheus_datasource}"},"description":"The percentage of memory being used by topic and queue destinations.","fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisCenteredZero":false,"axisColorMode":"text","axisLabel":"","axisPlacement":"auto","axisShow":false,"barAlignment":0,"drawStyle":"line","fillOpacity":25,"gradientMode":"opacity","hideFrom":{"legend":false,"tooltip":false,"viz":false},"insertNulls":false,"lineInterpolation":"smooth","lineWidth":2,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"never","spanNulls":false,"stacking":{"group":"A","mode":"normal"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"max":100,"min":0,"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null}]},"unit":"percent"},"overrides":[]},"gridPos":{"h":8,"w":12,"x":12,"y":10},"id":10,"options":{"legend":{"calcs":[],"displayMode":"list","placement":"right","showLegend":true},"tooltip":{"mode":"multi","sort":"desc"}},"targets":[{"datasource":{"uid":"${prometheus_datasource}"},"expr":"sum by(instance, activemq_cluster, job) (activemq_queue_memory_percent_usage{job=~\"$job\", cluster=~\"$cluster\", activemq_cluster=~\"$activemq_cluster\", instance=~\"$instance\"})","format":"time_series","intervalFactor":2,"legendFormat":"{{activemq_cluster}} - {{instance}} - queue"},{"datasource":{"uid":"${prometheus_datasource}"},"expr":"sum by(instance, activemq_cluster, job) (activemq_topic_memory_percent_usage{job=~\"$job\", cluster=~\"$cluster\", activemq_cluster=~\"$activemq_cluster\", instance=~\"$instance\", destination!~\"ActiveMQ.Advisory.*\"})","format":"time_series","intervalFactor":2,"legendFormat":"{{activemq_cluster}} - {{instance}} - topic"}],"title":"Destination memory usage","type":"timeseries"},{"datasource":{"uid":"${prometheus_datasource}"},"description":"Number of messages that have been sent to the destination.","fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisCenteredZero":false,"axisColorMode":"text","axisLabel":"","axisPlacement":"auto","axisShow":false,"barAlignment":0,"drawStyle":"line","fillOpacity":25,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"insertNulls":false,"lineInterpolation":"smooth","lineWidth":2,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"never","spanNulls":false,"stacking":{"group":"A","mode":"normal"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null}]},"unit":"none"},"overrides":[]},"gridPos":{"h":8,"w":12,"x":0,"y":18},"id":11,"options":{"legend":{"calcs":[],"displayMode":"list","placement":"right","showLegend":true},"tooltip":{"mode":"multi","sort":"desc"}},"targets":[{"datasource":{"uid":"${prometheus_datasource}"},"expr":"sum by(instance, activemq_cluster, job) (increase(activemq_queue_enqueue_count{job=~\"$job\", cluster=~\"$cluster\", activemq_cluster=~\"$activemq_cluster\", instance=~\"$instance\"}[$__interval:]))","format":"time_series","interval":"1m","intervalFactor":2,"legendFormat":"{{activemq_cluster}} - {{instance}} - queue"},{"datasource":{"uid":"${prometheus_datasource}"},"expr":"sum by(instance, activemq_cluster, job) (increase(activemq_topic_enqueue_count{job=~\"$job\", cluster=~\"$cluster\", activemq_cluster=~\"$activemq_cluster\", instance=~\"$instance\", destination!~\"ActiveMQ.Advisory.*\"}[$__interval:]))","format":"time_series","interval":"1m","intervalFactor":2,"legendFormat":"{{activemq_cluster}} - {{instance}} - topic"}],"title":"Enqueue / $__interval","type":"timeseries"},{"datasource":{"uid":"${prometheus_datasource}"},"description":"Number of messages that have been acknowledged (and removed) from the destinations.","fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisCenteredZero":false,"axisColorMode":"text","axisLabel":"","axisPlacement":"auto","axisShow":false,"barAlignment":0,"drawStyle":"line","fillOpacity":25,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"insertNulls":false,"lineInterpolation":"smooth","lineWidth":1,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"never","spanNulls":false,"stacking":{"group":"A","mode":"normal"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null}]},"unit":"none"},"overrides":[]},"gridPos":{"h":8,"w":12,"x":12,"y":18},"id":12,"options":{"legend":{"calcs":[],"displayMode":"list","placement":"right","showLegend":true},"tooltip":{"mode":"multi","sort":"desc"}},"targets":[{"datasource":{"uid":"${prometheus_datasource}"},"expr":"sum by(instance, activemq_cluster) (increase(activemq_queue_dequeue_count{job=~\"$job\", cluster=~\"$cluster\", activemq_cluster=~\"$activemq_cluster\", instance=~\"$instance\"}[$__interval:]))","format":"time_series","interval":"1m","intervalFactor":2,"legendFormat":"{{activemq_cluster}} - {{instance}} - queue"},{"datasource":{"uid":"${prometheus_datasource}"},"expr":"sum by(instance, activemq_cluster) (increase(activemq_topic_dequeue_count{job=~\"$job\", cluster=~\"$cluster\", activemq_cluster=~\"$activemq_cluster\", instance=~\"$instance\", destination!~\"ActiveMQ.Advisory.*\"}[$__interval:]))","format":"time_series","interval":"1m","intervalFactor":2,"legendFormat":"{{activemq_cluster}} - {{instance}} - topic"}],"title":"Dequeue / $__interval","type":"timeseries"},{"datasource":{"uid":"${prometheus_datasource}"},"description":"Average time a message was held across all destinations.","fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisCenteredZero":false,"axisColorMode":"text","axisLabel":"","axisPlacement":"auto","axisShow":false,"barAlignment":0,"drawStyle":"line","fillOpacity":25,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"insertNulls":false,"lineInterpolation":"smooth","lineWidth":2,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"never","spanNulls":false,"stacking":{"group":"A","mode":"normal"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null}]},"unit":"ms"},"overrides":[]},"gridPos":{"h":8,"w":12,"x":0,"y":26},"id":13,"options":{"legend":{"calcs":[],"displayMode":"list","placement":"right","showLegend":true},"tooltip":{"mode":"multi","sort":"desc"}},"targets":[{"datasource":{"uid":"${prometheus_datasource}"},"expr":"avg by (activemq_cluster, instance, job) (activemq_queue_average_enqueue_time{job=~\"$job\", cluster=~\"$cluster\", activemq_cluster=~\"$activemq_cluster\", instance=~\"$instance\"})","format":"time_series","intervalFactor":2,"legendFormat":"{{activemq_cluster}} - {{instance}} - queue"},{"datasource":{"uid":"${prometheus_datasource}"},"expr":"avg by (activemq_cluster, instance, job) (activemq_topic_average_enqueue_time{job=~\"$job\", cluster=~\"$cluster\", activemq_cluster=~\"$activemq_cluster\", instance=~\"$instance\", destination!~\"ActiveMQ.Advisory.*\"})","format":"time_series","intervalFactor":2,"legendFormat":"{{activemq_cluster}} - {{instance}} - topic"}],"title":"Average enqueue time","type":"timeseries"},{"datasource":{"uid":"${prometheus_datasource}"},"description":"Number of messages across destinations that are expired.","fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisCenteredZero":false,"axisColorMode":"text","axisLabel":"","axisPlacement":"auto","axisShow":false,"barAlignment":0,"drawStyle":"line","fillOpacity":25,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"insertNulls":false,"lineInterpolation":"smooth","lineWidth":2,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"never","spanNulls":false,"stacking":{"group":"A","mode":"normal"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null}]},"unit":"none"},"overrides":[]},"gridPos":{"h":8,"w":12,"x":12,"y":26},"id":14,"options":{"legend":{"calcs":[],"displayMode":"list","placement":"right","showLegend":true},"tooltip":{"mode":"multi","sort":"desc"}},"targets":[{"datasource":{"uid":"${prometheus_datasource}"},"expr":"sum by(instance, activemq_cluster, job) (increase(activemq_queue_expired_count{job=~\"$job\", cluster=~\"$cluster\", activemq_cluster=~\"$activemq_cluster\", instance=~\"$instance\"}[$__interval:]))","format":"time_series","interval":"1m","intervalFactor":2,"legendFormat":"{{activemq_cluster}} - {{instance}} - queue"},{"datasource":{"uid":"${prometheus_datasource}"},"expr":"sum by(instance, activemq_cluster, job) (increase(activemq_topic_expired_count{job=~\"$job\", cluster=~\"$cluster\", activemq_cluster=~\"$activemq_cluster\", instance=~\"$instance\", destination!~\"ActiveMQ.Advisory.*\"}[$__interval:]))","format":"time_series","interval":"1m","intervalFactor":2,"legendFormat":"{{activemq_cluster}} - {{instance}} - topic"}],"title":"Expired messages / $__interval","type":"timeseries"},{"collapsed":false,"datasource":{"uid":"${prometheus_datasource}"},"gridPos":{"h":1,"w":24,"x":0,"y":34},"id":15,"targets":[],"title":"JVM resources","type":"row"},{"datasource":{"uid":"${prometheus_datasource}"},"description":"The time spent performing recent garbage collections","fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisCenteredZero":false,"axisColorMode":"text","axisLabel":"","axisPlacement":"auto","axisShow":false,"barAlignment":0,"drawStyle":"line","fillOpacity":25,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"insertNulls":false,"lineInterpolation":"smooth","lineWidth":2,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"never","spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green"}]},"unit":"s"},"overrides":[]},"gridPos":{"h":8,"w":12,"x":0,"y":35},"id":16,"options":{"legend":{"calcs":[],"displayMode":"list","placement":"right","showLegend":true},"tooltip":{"mode":"multi","sort":"desc"}},"targets":[{"datasource":{"uid":"${prometheus_datasource}"},"expr":"jvm_gc_duration_seconds{job=~\"$job\", cluster=~\"$cluster\", activemq_cluster=~\"$activemq_cluster\", instance=~\"$instance\"}","format":"time_series","interval":"1m","intervalFactor":2,"legendFormat":"{{activemq_cluster}} - {{instance}}"}],"title":"Garbage collection duration","type":"timeseries"},{"datasource":{"uid":"${prometheus_datasource}"},"description":"The recent increase in the number of garbage collection events for the JVM.","fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisCenteredZero":false,"axisColorMode":"text","axisLabel":"","axisPlacement":"auto","axisShow":false,"barAlignment":0,"drawStyle":"line","fillOpacity":25,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"insertNulls":false,"lineInterpolation":"smooth","lineWidth":2,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"never","spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green"}]},"unit":"none"},"overrides":[]},"gridPos":{"h":8,"w":12,"x":12,"y":35},"id":17,"options":{"legend":{"calcs":[],"displayMode":"list","placement":"right","showLegend":true},"tooltip":{"mode":"multi","sort":"desc"}},"targets":[{"datasource":{"uid":"${prometheus_datasource}"},"expr":"increase(jvm_gc_collection_count{job=~\"$job\", cluster=~\"$cluster\", activemq_cluster=~\"$activemq_cluster\", instance=~\"$instance\", name=\"G1 Young Generation\"}[$__interval:])","format":"time_series","interval":"1m","intervalFactor":2,"legendFormat":"{{activemq_cluster}} - {{instance}}"}],"title":"Garbage collection count / $__interval","type":"timeseries"}],"refresh":"30s","rows":[],"schemaVersion":14,"style":"dark","tags":["apache-activemq-integration"],"templating":{"list":[{"current":{},"hide":0,"label":"Data source","name":"prometheus_datasource","options":[],"query":"prometheus","refresh":1,"regex":"(?!grafanacloud-usage|grafanacloud-ml-metrics).+","type":"datasource"},{"allValue":".+","current":{},"datasource":{"uid":"${prometheus_datasource}"},"hide":0,"includeAll":true,"label":"Job","multi":true,"name":"job","options":[],"query":"label_values(activemq_topic_producer_count,job)","refresh":2,"regex":"","sort":0,"tagValuesQuery":"","tags":[],"tagsQuery":"","type":"query","useTags":false},{"allValue":".*","current":{},"datasource":{"uid":"${prometheus_datasource}"},"hide":0,"includeAll":true,"label":"Cluster","multi":true,"name":"cluster","options":[],"query":"label_values(activemq_memory_usage_ratio{job=~\"$job\"},cluster)","refresh":2,"regex":"","sort":0,"tagValuesQuery":"","tags":[],"tagsQuery":"","type":"query","useTags":false},{"allValue":".+","current":{},"datasource":{"uid":"${prometheus_datasource}"},"hide":0,"includeAll":true,"label":"ActiveMQ cluster","multi":true,"name":"activemq_cluster","options":[],"query":"label_values(activemq_memory_usage_ratio{job=~\"$job\", cluster=~\"$cluster\"},activemq_cluster)","refresh":2,"regex":"","sort":0,"tagValuesQuery":"","tags":[],"tagsQuery":"","type":"query","useTags":false},{"allValue":".+","current":{},"datasource":{"uid":"${prometheus_datasource}"},"hide":0,"includeAll":true,"label":"Instance","multi":true,"name":"instance","options":[],"query":"label_values(activemq_topic_producer_count{job=~\"$job\", cluster=~\"$cluster\", activemq_cluster=~\"$activemq_cluster\"},instance)","refresh":2,"regex":"","sort":0,"tagValuesQuery":"","tags":[],"tagsQuery":"","type":"query","useTags":false}]},"time":{"from":"now-30m","to":"now"},"timepicker":{"refresh_intervals":["5s","10s","30s","1m","5m","15m","30m","1h","2h","1d"],"time_options":["5m","15m","1h","6h","12h","24h","2d","7d","30d"]},"timezone":"default","title":"Apache ActiveMQ instance overview","uid":"apache-activemq-instance-overview","version":0},"folder_name":"Integration - Apache ActiveMQ","overwrite":true},{"dashboard":{"editable":false,"id":null,"links":[{"asDropdown":false,"icon":"external link","includeVars":true,"keepTime":true,"tags":["apache-activemq-integration"],"targetBlank":false,"title":"Other Apache ActiveMQ dashboards","type":"dashboards","url":""}],"panels":[{"datasource":{"type":"datasource","uid":"-- Mixed --"},"description":"Shows if logs are being received for the selected time range.","fieldConfig":{"defaults":{"color":{"fixedColor":"text","mode":"fixed"},"mappings":[{"options":{"match":"null","result":{"color":"light-yellow","index":0,"text":"Failed to collect logs or no logs available"}},"type":"special"},{"options":{"from":0,"result":{"color":"light-yellow","index":1,"text":"Failed to collect logs or no logs available"},"to":0},"type":"range"},{"options":{"from":1,"result":{"color":"light-green","index":2,"text":"Receiving logs"},"to":1000000},"type":"range"}],"noValue":"No data","unit":"string"}},"gridPos":{"h":2,"w":8,"x":0,"y":0},"options":{"colorMode":"background","graphMode":"none","reduceOptions":{"calcs":["lastNotNull"]}},"pluginVersion":"v10.0.0","targets":[{"datasource":{"type":"loki","uid":"$loki_datasource"},"expr":"sum(count_over_time({job=~\"$job\"}[5m]))\n"}],"title":"Logs","type":"stat"},{"datasource":{"type":"datasource","uid":"-- Mixed --"},"description":"Shows the timestamp of the latest logs received for this integration in the last 24 hours.","fieldConfig":{"defaults":{"color":{"fixedColor":"text","mode":"fixed"},"noValue":"No data","unit":"dateTimeFromNow"}},"gridPos":{"h":2,"w":8,"x":8,"y":0},"options":{"colorMode":"background","graphMode":"none","reduceOptions":{"calcs":["lastNotNull"],"fields":"Time"}},"pluginVersion":"v10.0.0","targets":[{"datasource":{"type":"loki","uid":"$loki_datasource"},"expr":"sum(count_over_time({job=~\"$job\"}[5m]))\n"}],"timeFrom":"now-24h","title":"Latest logs received","type":"stat"},{"datasource":{"type":"datasource","uid":"-- Mixed --"},"description":"Shows the installed version of this integration.","fieldConfig":{"defaults":{"color":{"fixedColor":"text","mode":"fixed"},"noValue":"1.0.1","unit":"string"}},"gridPos":{"h":2,"w":8,"x":16,"y":0},"pluginVersion":"v10.0.0","title":"Integration version","type":"stat"},{"datasource":{"type":"loki","uid":"${loki_datasource}"},"description":"Logs volume grouped by \"level\" label.","fieldConfig":{"defaults":{"custom":{"drawStyle":"bars","fillOpacity":50,"stacking":{"mode":"normal"}},"unit":"none"},"overrides":[{"matcher":{"id":"byRegexp","options":"(E|e)merg|(F|f)atal|(A|a)lert|(C|c)rit.*"},"properties":[{"id":"color","value":{"fixedColor":"purple","mode":"fixed"}}]},{"matcher":{"id":"byRegexp","options":"(E|e)(rr.*|RR.*)"},"properties":[{"id":"color","value":{"fixedColor":"red","mode":"fixed"}}]},{"matcher":{"id":"byRegexp","options":"(W|w)(arn.*|ARN.*|rn|RN)"},"properties":[{"id":"color","value":{"fixedColor":"orange","mode":"fixed"}}]},{"matcher":{"id":"byRegexp","options":"(N|n)(otice|ote)|(I|i)(nf.*|NF.*)"},"properties":[{"id":"color","value":{"fixedColor":"green","mode":"fixed"}}]},{"matcher":{"id":"byRegexp","options":"dbg.*|DBG.*|(D|d)(EBUG|ebug)"},"properties":[{"id":"color","value":{"fixedColor":"blue","mode":"fixed"}}]},{"matcher":{"id":"byRegexp","options":"(T|t)(race|RACE)"},"properties":[{"id":"color","value":{"fixedColor":"light-blue","mode":"fixed"}}]},{"matcher":{"id":"byRegexp","options":"logs"},"properties":[{"id":"color","value":{"fixedColor":"text","mode":"fixed"}}]}]},"gridPos":{"h":6,"w":24,"y":3},"id":1,"interval":"30s","options":{"tooltip":{"mode":"multi","sort":"desc"}},"pluginVersion":"v10.0.0","targets":[{"datasource":{"type":"loki","uid":"${loki_datasource}"},"expr":"sum by (level) (count_over_time({job=~\"integrations/apache-activemq\",job=~\"$job\",activemq_cluster=~\"$activemq_cluster\",instance=~\"$instance\",level=~\"$level\"}\n|~ \"$regex_search\"\n\n[$__interval]))\n","legendFormat":"{{ level }}"}],"title":"Logs volume","transformations":[{"id":"renameByRegex","options":{"regex":"Value","renamePattern":"logs"}}],"type":"timeseries"},{"datasource":{"type":"datasource","uid":"-- Mixed --"},"gridPos":{"h":18,"w":24,"y":3},"id":2,"options":{"dedupStrategy":"exact","enableLogDetails":true,"prettifyLogMessage":true,"showTime":false,"wrapLogMessage":true},"pluginVersion":"v10.0.0","targets":[{"datasource":{"type":"loki","uid":"${loki_datasource}"},"expr":"{job=~\"integrations/apache-activemq\",job=~\"$job\",activemq_cluster=~\"$activemq_cluster\",instance=~\"$instance\",level=~\"$level\"} \n|~ \"$regex_search\"\n\n\n"}],"title":"Logs","type":"logs"}],"refresh":"30s","schemaVersion":36,"tags":["apache-activemq-integration"],"templating":{"list":[{"label":"Loki data source","name":"loki_datasource","query":"loki","regex":"(?!grafanacloud.+usage-insights|grafanacloud.+alert-state-history).+","type":"datasource"},{"allValue":".*","datasource":{"type":"loki","uid":"${loki_datasource}"},"includeAll":true,"label":"Job","multi":true,"name":"job","query":"label_values({job=~\"integrations/apache-activemq\"}, job)","refresh":2,"sort":1,"type":"query"},{"allValue":".*","datasource":{"type":"loki","uid":"${loki_datasource}"},"includeAll":true,"label":"Activemq_cluster","multi":true,"name":"activemq_cluster","query":"label_values({job=~\"integrations/apache-activemq\",job=~\"$job\"}, activemq_cluster)","refresh":2,"sort":1,"type":"query"},{"allValue":".*","datasource":{"type":"loki","uid":"${loki_datasource}"},"includeAll":true,"label":"Instance","multi":true,"name":"instance","query":"label_values({job=~\"integrations/apache-activemq\",job=~\"$job\",activemq_cluster=~\"$activemq_cluster\"}, instance)","refresh":2,"sort":1,"type":"query"},{"allValue":".*","datasource":{"type":"loki","uid":"${loki_datasource}"},"includeAll":true,"label":"Level","multi":true,"name":"level","query":"label_values({job=~\"integrations/apache-activemq\",job=~\"$job\",activemq_cluster=~\"$activemq_cluster\",instance=~\"$instance\"}, level)","refresh":2,"sort":1,"type":"query"},{"current":{"selected":false,"text":"","value":""},"label":"Regex search","name":"regex_search","options":[{"selected":true,"text":"","value":""}],"query":"","type":"textbox"}]},"time":{"from":"now-30m","to":"now"},"timezone":"utc","title":"Apache ActiveMQ logs","uid":"apache-activemq-logs"},"folder_name":"Integration - Apache ActiveMQ","overwrite":true},{"dashboard":{"__inputs":[],"__requires":[],"annotations":{"list":[]},"description":"","editable":false,"gnetId":null,"graphTooltip":0,"hideControls":false,"id":null,"links":[{"asDropdown":false,"icon":"external link","includeVars":true,"keepTime":true,"tags":["apache-activemq-integration"],"targetBlank":false,"title":"Other Apache ActiveMQ dashboards","type":"dashboards","url":""}],"panels":[{"datasource":{"uid":"${prometheus_datasource}"},"description":"Number of queues connected with the broker instance.","fieldConfig":{"defaults":{"color":{"mode":"fixed"},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null}]},"unit":"none"},"overrides":[]},"gridPos":{"h":4,"w":6,"x":0,"y":0},"id":2,"options":{"colorMode":"none","graphMode":"area","justifyMode":"auto","orientation":"auto","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"textMode":"auto"},"pluginVersion":"10.2.0-60139","targets":[{"datasource":{"uid":"${prometheus_datasource}"},"expr":"count (activemq_queue_queue_size{job=~\"$job\", cluster=~\"$cluster\", activemq_cluster=~\"$activemq_cluster\", instance=~\"$instance\"})","format":"time_series","intervalFactor":2,"legendFormat":"__auto"}],"title":"Queues","type":"stat"},{"datasource":{"uid":"${prometheus_datasource}"},"description":"Number of messages in queue destinations.","fieldConfig":{"defaults":{"color":{"mode":"fixed"},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null}]}},"overrides":[]},"gridPos":{"h":4,"w":6,"x":6,"y":0},"id":3,"options":{"colorMode":"none","graphMode":"area","justifyMode":"auto","orientation":"auto","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"textMode":"auto"},"pluginVersion":"10.2.0-60139","targets":[{"datasource":{"uid":"${prometheus_datasource}"},"expr":"sum (activemq_queue_queue_size{job=~\"$job\", cluster=~\"$cluster\", activemq_cluster=~\"$activemq_cluster\", instance=~\"$instance\"})","format":"time_series","intervalFactor":2,"legendFormat":"__auto"}],"title":"Queue size","type":"stat"},{"datasource":{"uid":"${prometheus_datasource}"},"description":"The number of producers attached to queue destinations.","fieldConfig":{"defaults":{"color":{"mode":"fixed"},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null}]},"unit":"none"},"overrides":[]},"gridPos":{"h":4,"w":6,"x":12,"y":0},"id":4,"options":{"colorMode":"none","graphMode":"area","justifyMode":"auto","orientation":"auto","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"textMode":"auto"},"pluginVersion":"10.2.0-60139","targets":[{"datasource":{"uid":"${prometheus_datasource}"},"expr":"sum (activemq_queue_producer_count{job=~\"$job\", cluster=~\"$cluster\", activemq_cluster=~\"$activemq_cluster\", instance=~\"$instance\"})","format":"time_series","intervalFactor":2,"legendFormat":"__auto"}],"title":"Producers","type":"stat"},{"datasource":{"uid":"${prometheus_datasource}"},"description":"The number of consumers subscribed to queue destinations.","fieldConfig":{"defaults":{"color":{"mode":"fixed"},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null}]},"unit":"none"},"overrides":[]},"gridPos":{"h":4,"w":6,"x":18,"y":0},"id":5,"options":{"colorMode":"none","graphMode":"area","justifyMode":"auto","orientation":"auto","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"textMode":"auto"},"pluginVersion":"10.2.0-60139","targets":[{"datasource":{"uid":"${prometheus_datasource}"},"expr":"sum (activemq_queue_consumer_count{job=~\"$job\", cluster=~\"$cluster\", activemq_cluster=~\"$activemq_cluster\", instance=~\"$instance\"})","format":"time_series","intervalFactor":2,"legendFormat":"__auto"}],"title":"Consumers","type":"stat"},{"datasource":{"uid":"${prometheus_datasource}"},"description":"The rate messages sent to queue destinations.","fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisCenteredZero":false,"axisColorMode":"text","axisLabel":"","axisPlacement":"auto","axisShow":false,"barAlignment":0,"drawStyle":"line","fillOpacity":25,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"insertNulls":false,"lineInterpolation":"smooth","lineWidth":2,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"never","spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null}]},"unit":"mps"},"overrides":[]},"gridPos":{"h":8,"w":12,"x":0,"y":4},"id":6,"options":{"legend":{"calcs":[],"displayMode":"list","placement":"right","showLegend":true},"tooltip":{"mode":"multi","sort":"desc"}},"targets":[{"datasource":{"uid":"${prometheus_datasource}"},"expr":"topk by(instance, activemq_cluster, job) ($k_selector, rate(activemq_queue_enqueue_count{job=~\"$job\", cluster=~\"$cluster\", activemq_cluster=~\"$activemq_cluster\", instance=~\"$instance\", destination=~\".*$name.*\"}[$__rate_interval]))","format":"time_series","intervalFactor":2,"legendFormat":"{{activemq_cluster}} - {{instance}} - {{destination}}"}],"title":"Top queues by enqueue rate","type":"timeseries"},{"datasource":{"uid":"${prometheus_datasource}"},"description":"The rate messages have been acknowledged (and removed) from queue destinations.","fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisCenteredZero":false,"axisColorMode":"text","axisLabel":"","axisPlacement":"auto","axisShow":false,"barAlignment":0,"drawStyle":"line","fillOpacity":25,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"insertNulls":false,"lineInterpolation":"smooth","lineWidth":2,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"never","spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null}]},"unit":"mps"},"overrides":[]},"gridPos":{"h":8,"w":12,"x":12,"y":4},"id":7,"options":{"legend":{"calcs":[],"displayMode":"list","placement":"right","showLegend":true},"tooltip":{"mode":"multi","sort":"desc"}},"targets":[{"datasource":{"uid":"${prometheus_datasource}"},"expr":"topk by(instance, activemq_cluster) ($k_selector, rate(activemq_queue_dequeue_count{job=~\"$job\", cluster=~\"$cluster\", activemq_cluster=~\"$activemq_cluster\",instance=~\"$instance\", destination=~\".*$name.*\"}[$__rate_interval]))","format":"time_series","intervalFactor":2,"legendFormat":"{{activemq_cluster}} - {{instance}} - {{destination}}"}],"title":"Top queues by dequeue rate","type":"timeseries"},{"datasource":{"uid":"${prometheus_datasource}"},"description":"Average time a message was held on queue destinations.","fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisCenteredZero":false,"axisColorMode":"text","axisLabel":"","axisPlacement":"auto","axisShow":false,"barAlignment":0,"drawStyle":"line","fillOpacity":25,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"insertNulls":false,"lineInterpolation":"smooth","lineWidth":2,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"never","spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null}]},"unit":"ms"},"overrides":[]},"gridPos":{"h":8,"w":12,"x":0,"y":12},"id":8,"options":{"legend":{"calcs":[],"displayMode":"list","placement":"right","showLegend":true},"tooltip":{"mode":"multi","sort":"desc"}},"targets":[{"datasource":{"uid":"${prometheus_datasource}"},"expr":"topk by(instance, activemq_cluster) ($k_selector, activemq_queue_average_enqueue_time{job=~\"$job\", cluster=~\"$cluster\", activemq_cluster=~\"$activemq_cluster\", instance=~\"$instance\", destination=~\".*$name.*\"})","format":"time_series","intervalFactor":2,"legendFormat":"{{activemq_cluster}} - {{instance}} - {{destination}}"}],"title":"Top queues by average enqueue time","type":"timeseries"},{"datasource":{"uid":"${prometheus_datasource}"},"description":"The rate messages have expired on queue destinations.","fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisCenteredZero":false,"axisColorMode":"text","axisLabel":"","axisPlacement":"auto","axisShow":false,"barAlignment":0,"drawStyle":"line","fillOpacity":25,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"insertNulls":false,"lineInterpolation":"smooth","lineWidth":2,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"never","spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null}]},"unit":"mps"},"overrides":[]},"gridPos":{"h":8,"w":12,"x":12,"y":12},"id":9,"options":{"legend":{"calcs":[],"displayMode":"list","placement":"right","showLegend":true},"tooltip":{"mode":"multi","sort":"desc"}},"targets":[{"datasource":{"uid":"${prometheus_datasource}"},"expr":"topk by(instance, activemq_cluster, job) ($k_selector, rate(activemq_queue_expired_count{job=~\"$job\", cluster=~\"$cluster\", activemq_cluster=~\"$activemq_cluster\", instance=~\"$instance\", destination=~\".*$name.*\"}[$__rate_interval]))","format":"time_series","intervalFactor":2,"legendFormat":"{{activemq_cluster}} - {{instance}} - {{destination}}"}],"title":"Top queues by expired message rate","type":"timeseries"},{"datasource":{"uid":"${prometheus_datasource}"},"description":"Average message size on queue destinations.","fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisCenteredZero":false,"axisColorMode":"text","axisLabel":"","axisPlacement":"auto","axisShow":false,"axisSoftMin":0,"barAlignment":0,"drawStyle":"line","fillOpacity":25,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"insertNulls":false,"lineInterpolation":"smooth","lineWidth":2,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"never","spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"min":0,"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null}]},"unit":"decbytes"},"overrides":[]},"gridPos":{"h":7,"w":24,"x":0,"y":20},"id":10,"options":{"legend":{"calcs":[],"displayMode":"list","placement":"right","showLegend":true},"tooltip":{"mode":"multi","sort":"desc"}},"targets":[{"datasource":{"uid":"${prometheus_datasource}"},"expr":"topk by(instance, activemq_cluster, job) ($k_selector, activemq_queue_average_message_size{job=~\"$job\", cluster=~\"$cluster\", activemq_cluster=~\"$activemq_cluster\", instance=~\"$instance\", destination=~\".*$name.*\"})","format":"time_series","intervalFactor":2,"legendFormat":"{{activemq_cluster}} - {{instance}} - {{destination}}"}],"title":"Top queues by average message size","type":"timeseries"},{"datasource":{"uid":"${prometheus_datasource}"},"description":"Summary of queues showing queue name, enqueue and dequeue rate, average enqueue time, and average message size.","fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"custom":{"align":"center","cellOptions":{"type":"auto"},"inspect":false},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green"}]}},"overrides":[{"matcher":{"id":"byName","options":"Average message size"},"properties":[{"id":"unit","value":"decbytes"}]},{"matcher":{"id":"byName","options":"Enqueue rate"},"properties":[{"id":"unit","value":"mps"}]},{"matcher":{"id":"byName","options":"Dequeue rate"},"properties":[{"id":"unit","value":"mps"}]},{"matcher":{"id":"byName","options":"Average enqueue time"},"properties":[{"id":"unit","value":"ms"}]},{"matcher":{"id":"byName","options":"ActiveMQ cluster"},"properties":[{"id":"links","value":[{"title":"Cluster link","url":"d/apache-activemq-cluster-overview?var-activemq_cluster=${__data.fields.activemq_cluster}\u0026${__url_time_range}\u0026var-datasource=${datasource}"}]}]},{"matcher":{"id":"byName","options":"Instance"},"properties":[{"id":"links","value":[{"title":"Instance link","url":"d/apache-activemq-instance-overview?var-instance=${__data.fields.instance}\u0026${__url_time_range}\u0026var-datasource=${datasource}"}]}]}]},"gridPos":{"h":7,"w":24,"x":0,"y":27},"id":11,"options":{"cellHeight":"sm","footer":{"countRows":false,"fields":"","reducer":["sum"],"show":false},"showHeader":true,"sortBy":[]},"pluginVersion":"10.2.0-60139","targets":[{"datasource":{"uid":"${prometheus_datasource}"},"expr":"rate(activemq_queue_enqueue_count{job=~\"$job\", cluster=~\"$cluster\", activemq_cluster=~\"$activemq_cluster\", instance=~\"$instance\", destination=~\".*$name.*\"}[$__rate_interval:])","format":"table","intervalFactor":2,"legendFormat":"{{instance}}"},{"datasource":{"uid":"${prometheus_datasource}"},"expr":"rate(activemq_queue_dequeue_count{job=~\"$job\", cluster=~\"$cluster\", activemq_cluster=~\"$activemq_cluster\", instance=~\"$instance\", destination=~\".*$name.*\"}[$__rate_interval:])","format":"table","intervalFactor":2,"legendFormat":"{{instance}}"},{"datasource":{"uid":"${prometheus_datasource}"},"expr":"activemq_queue_average_enqueue_time{job=~\"$job\", cluster=~\"$cluster\", activemq_cluster=~\"$activemq_cluster\", instance=~\"$instance\", destination=~\".*$name.*\"}","format":"table","intervalFactor":2,"legendFormat":"{{instance}}"},{"datasource":{"uid":"${prometheus_datasource}"},"expr":"activemq_queue_average_message_size{job=~\"$job\", cluster=~\"$cluster\", activemq_cluster=~\"$activemq_cluster\", instance=~\"$instance\", destination=~\".*$name.*\"}","format":"table","intervalFactor":2,"legendFormat":"{{instance}}"}],"title":"Queue summary","transformations":[{"id":"joinByField","options":{"byField":"destination","mode":"outer"}},{"id":"organize","options":{"indexByName":{},"renameByName":{"Time 1":"","Value #A":"Enqueue rate","Value #B":"Dequeue rate","Value #C":"Average enqueue time","Value #D":"Average message size","activemq_cluster 1":"ActiveMQ cluster","destination":"Destination","instance 1":"Instance"}}},{"id":"filterFieldsByName","options":{"include":{"names":["ActiveMQ cluster","Instance","Enqueue rate","Dequeue rate","Average enqueue time","Average message size","Destination"]}}}],"type":"table"}],"refresh":"30s","rows":[],"schemaVersion":14,"style":"dark","tags":["apache-activemq-integration"],"templating":{"list":[{"current":{},"hide":0,"label":"Data source","name":"prometheus_datasource","options":[],"query":"prometheus","refresh":1,"regex":"(?!grafanacloud-usage|grafanacloud-ml-metrics).+","type":"datasource"},{"allValue":".+","current":{},"datasource":{"uid":"${prometheus_datasource}"},"hide":0,"includeAll":true,"label":"Job","multi":true,"name":"job","options":[],"query":"label_values(activemq_topic_producer_count,job)","refresh":2,"regex":"","sort":0,"tagValuesQuery":"","tags":[],"tagsQuery":"","type":"query","useTags":false},{"allValue":".*","current":{},"datasource":{"uid":"${prometheus_datasource}"},"hide":0,"includeAll":true,"label":"Cluster","multi":true,"name":"cluster","options":[],"query":"label_values(activemq_memory_usage_ratio{job=~\"$job\"},cluster)","refresh":2,"regex":"","sort":0,"tagValuesQuery":"","tags":[],"tagsQuery":"","type":"query","useTags":false},{"allValue":".+","current":{},"datasource":{"uid":"${prometheus_datasource}"},"hide":0,"includeAll":true,"label":"ActiveMQ cluster","multi":true,"name":"activemq_cluster","options":[],"query":"label_values(activemq_memory_usage_ratio{job=~\"$job\", cluster=~\"$cluster\"},activemq_cluster)","refresh":2,"regex":"","sort":0,"tagValuesQuery":"","tags":[],"tagsQuery":"","type":"query","useTags":false},{"allValue":".+","current":{},"datasource":{"uid":"${prometheus_datasource}"},"hide":0,"includeAll":true,"label":"Instance","multi":true,"name":"instance","options":[],"query":"label_values(activemq_topic_producer_count{job=~\"$job\", cluster=~\"$cluster\", activemq_cluster=~\"$activemq_cluster\"},instance)","refresh":2,"regex":"","sort":0,"tagValuesQuery":"","tags":[],"tagsQuery":"","type":"query","useTags":false},{"allValue":"","current":{"text":"4","value":"4"},"hide":0,"includeAll":false,"label":"Top queue count","multi":false,"name":"k_selector","options":[{"text":"2","value":"2"},{"text":"4","value":"4"},{"text":"6","value":"6"},{"text":"8","value":"8"},{"text":"10","value":"10"}],"query":"2,4,6,8,10","refresh":0,"type":"custom"},{"current":{"selected":false,"text":"","value":""},"label":"Queue by name","name":"name","query":"","type":"textbox"}]},"time":{"from":"now-30m","to":"now"},"timepicker":{"refresh_intervals":["5s","10s","30s","1m","5m","15m","30m","1h","2h","1d"],"time_options":["5m","15m","1h","6h","12h","24h","2d","7d","30d"]},"timezone":"default","title":"Apache ActiveMQ queue overview","uid":"apache-activemq-queue-overview","version":0},"folder_name":"Integration - Apache ActiveMQ","overwrite":true},{"dashboard":{"__inputs":[],"__requires":[],"annotations":{"list":[]},"description":"","editable":false,"gnetId":null,"graphTooltip":0,"hideControls":false,"id":null,"links":[{"asDropdown":false,"icon":"external link","includeVars":true,"keepTime":true,"tags":["apache-activemq-integration"],"targetBlank":false,"title":"Other Apache ActiveMQ dashboards","type":"dashboards","url":""}],"panels":[{"datasource":{"uid":"${prometheus_datasource}"},"description":"Number of topics connected with the broker instance.","fieldConfig":{"defaults":{"color":{"mode":"fixed"},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null}]},"unit":"none"},"overrides":[]},"gridPos":{"h":4,"w":6,"x":0,"y":0},"id":2,"options":{"colorMode":"none","graphMode":"area","justifyMode":"auto","orientation":"auto","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"textMode":"auto"},"pluginVersion":"10.2.0-60139","targets":[{"datasource":{"uid":"${prometheus_datasource}"},"expr":"count (activemq_topic_queue_size{job=~\"$job\", cluster=~\"$cluster\", activemq_cluster=~\"$activemq_cluster\", instance=~\"$instance\", destination!~\"ActiveMQ.Advisory.*\"})","format":"time_series","intervalFactor":2,"legendFormat":"__auto"}],"title":"Topics","type":"stat"},{"datasource":{"uid":"${prometheus_datasource}"},"description":"The number of producers attached to topic destinations.","fieldConfig":{"defaults":{"color":{"mode":"fixed"},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null}]},"unit":"none"},"overrides":[]},"gridPos":{"h":4,"w":6,"x":6,"y":0},"id":3,"options":{"colorMode":"none","graphMode":"area","justifyMode":"auto","orientation":"auto","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"textMode":"auto"},"pluginVersion":"10.2.0-60139","targets":[{"datasource":{"uid":"${prometheus_datasource}"},"expr":"sum (activemq_topic_producer_count{job=~\"$job\", cluster=~\"$cluster\", activemq_cluster=~\"$activemq_cluster\", instance=~\"$instance\", destination!~\"ActiveMQ.Advisory.*\"})","format":"time_series","intervalFactor":2,"legendFormat":"__auto"}],"title":"Producers","type":"stat"},{"datasource":{"uid":"${prometheus_datasource}"},"description":"The number of consumers subscribed to topic destinations.","fieldConfig":{"defaults":{"color":{"mode":"fixed"},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null}]},"unit":"none"},"overrides":[]},"gridPos":{"h":4,"w":6,"x":12,"y":0},"id":4,"options":{"colorMode":"none","graphMode":"area","justifyMode":"auto","orientation":"auto","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"textMode":"auto"},"pluginVersion":"10.2.0-60139","targets":[{"datasource":{"uid":"${prometheus_datasource}"},"expr":"sum (activemq_topic_consumer_count{job=~\"$job\", cluster=~\"$cluster\", activemq_cluster=~\"$activemq_cluster\", instance=~\"$instance\", destination!~\"ActiveMQ.Advisory.*\"})","format":"time_series","intervalFactor":2,"legendFormat":"__auto"}],"title":"Consumers","type":"stat"},{"datasource":{"uid":"${prometheus_datasource}"},"description":"Average number of consumers per topic.","fieldConfig":{"defaults":{"color":{"mode":"fixed"},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null}]},"unit":"none"},"overrides":[]},"gridPos":{"h":4,"w":6,"x":18,"y":0},"id":5,"options":{"colorMode":"none","graphMode":"area","justifyMode":"auto","orientation":"auto","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"textMode":"auto"},"pluginVersion":"10.2.0-60139","targets":[{"datasource":{"uid":"${prometheus_datasource}"},"expr":"avg (activemq_topic_consumer_count{job=~\"$job\", cluster=~\"$cluster\", activemq_cluster=~\"$activemq_cluster\", instance=~\"$instance\", destination!~\"ActiveMQ.Advisory.*\"})","format":"time_series","intervalFactor":2,"legendFormat":"__auto"}],"title":"Average consumers per topic","type":"stat"},{"datasource":{"uid":"${prometheus_datasource}"},"description":"The rate messages are sent to topic destinations.","fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisCenteredZero":false,"axisColorMode":"text","axisLabel":"","axisPlacement":"auto","axisShow":false,"barAlignment":0,"drawStyle":"line","fillOpacity":25,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"insertNulls":false,"lineInterpolation":"smooth","lineWidth":2,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"never","spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null}]},"unit":"mps"},"overrides":[]},"gridPos":{"h":8,"w":12,"x":0,"y":4},"id":6,"options":{"legend":{"calcs":[],"displayMode":"list","placement":"right","showLegend":true},"tooltip":{"mode":"multi","sort":"desc"}},"targets":[{"datasource":{"uid":"${prometheus_datasource}"},"expr":"topk by(instance, activemq_cluster, job) ($k_selector, rate(activemq_topic_enqueue_count{job=~\"$job\", cluster=~\"$cluster\", activemq_cluster=~\"$activemq_cluster\", instance=~\"$instance\", destination!~\"ActiveMQ.Advisory.*\", destination=~\".*$name.*\"}[$__rate_interval]))","format":"time_series","intervalFactor":2,"legendFormat":"{{activemq_cluster}} - {{instance}} - {{destination}}"}],"title":"Top topics by enqueue rate","type":"timeseries"},{"datasource":{"uid":"${prometheus_datasource}"},"description":"The rate messages have been acknowledged (and removed) from topic destinations","fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisCenteredZero":false,"axisColorMode":"text","axisLabel":"","axisPlacement":"auto","axisShow":false,"barAlignment":0,"drawStyle":"line","fillOpacity":25,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"insertNulls":false,"lineInterpolation":"smooth","lineWidth":2,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"never","spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null}]},"unit":"mps"},"overrides":[]},"gridPos":{"h":8,"w":12,"x":12,"y":4},"id":7,"options":{"legend":{"calcs":[],"displayMode":"list","placement":"right","showLegend":true},"tooltip":{"mode":"multi","sort":"desc"}},"targets":[{"datasource":{"uid":"${prometheus_datasource}"},"expr":"topk by(instance, activemq_cluster, job) ($k_selector, rate(activemq_topic_dequeue_count{job=~\"$job\", cluster=~\"$cluster\", activemq_cluster=~\"$activemq_cluster\", instance=~\"$instance\", destination!~\"ActiveMQ.Advisory.*\", destination=~\".*$name.*\"}[$__rate_interval]))","format":"time_series","intervalFactor":2,"legendFormat":"{{activemq_cluster}} - {{instance}} - {{destination}}"}],"title":"Top topics by dequeue rate","type":"timeseries"},{"datasource":{"uid":"${prometheus_datasource}"},"description":"Average time a message was held across all topic destinations.","fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisCenteredZero":false,"axisColorMode":"text","axisLabel":"","axisPlacement":"auto","axisShow":false,"barAlignment":0,"drawStyle":"line","fillOpacity":25,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"insertNulls":false,"lineInterpolation":"smooth","lineWidth":2,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"never","spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null}]},"unit":"ms"},"overrides":[]},"gridPos":{"h":8,"w":12,"x":0,"y":12},"id":8,"options":{"legend":{"calcs":[],"displayMode":"list","placement":"right","showLegend":true},"tooltip":{"mode":"multi","sort":"desc"}},"targets":[{"datasource":{"uid":"${prometheus_datasource}"},"expr":"topk by(instance, activemq_cluster, job) ($k_selector, activemq_topic_average_enqueue_time{job=~\"$job\", cluster=~\"$cluster\", activemq_cluster=~\"$activemq_cluster\", instance=~\"$instance\", destination!~\"ActiveMQ.Advisory.*\", destination=~\".*$name.*\"})","format":"time_series","intervalFactor":2,"legendFormat":"{{activemq_cluster}} - {{instance}} - {{destination}}"}],"title":"Top topics by average enqueue time","type":"timeseries"},{"datasource":{"uid":"${prometheus_datasource}"},"description":"The rate messages have expired on topic destinations.","fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisCenteredZero":false,"axisColorMode":"text","axisLabel":"","axisPlacement":"auto","axisShow":false,"barAlignment":0,"drawStyle":"line","fillOpacity":25,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"insertNulls":false,"lineInterpolation":"smooth","lineWidth":2,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"never","spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null}]},"unit":"mps"},"overrides":[]},"gridPos":{"h":8,"w":12,"x":12,"y":12},"id":9,"options":{"legend":{"calcs":[],"displayMode":"list","placement":"right","showLegend":true},"tooltip":{"mode":"multi","sort":"desc"}},"targets":[{"datasource":{"uid":"${prometheus_datasource}"},"expr":"topk by(instance, activemq_cluster, job) ($k_selector, rate(activemq_topic_expired_count{job=~\"$job\", cluster=~\"$cluster\", activemq_cluster=~\"$activemq_cluster\", instance=~\"$instance\", destination!~\"ActiveMQ.Advisory.*\", destination=~\".*$name.*\"}[$__rate_interval]))","format":"time_series","intervalFactor":2,"legendFormat":"{{activemq_cluster}} - {{instance}} - {{destination}}"}],"title":"Top topics by expired message rate","type":"timeseries"},{"datasource":{"uid":"${prometheus_datasource}"},"description":"The number of consumers subscribed to the most active/used topics.","fieldConfig":{"defaults":{"color":{"mode":"fixed"},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null}]},"unit":"none"},"overrides":[]},"gridPos":{"h":8,"w":12,"x":0,"y":20},"id":10,"options":{"displayMode":"gradient","minVizHeight":10,"minVizWidth":0,"orientation":"horizontal","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"showUnfilled":true,"valueMode":"color"},"pluginVersion":"10.2.0-60139","targets":[{"datasource":{"uid":"${prometheus_datasource}"},"expr":"topk by(instance, activemq_cluster, job) ($k_selector, activemq_topic_consumer_count{job=~\"$job\", cluster=~\"$cluster\", activemq_cluster=~\"$activemq_cluster\", instance=~\"$instance\", destination!~\"ActiveMQ.Advisory.*\", destination=~\".*$name.*\"})","format":"time_series","intervalFactor":2,"legendFormat":"{{activemq_cluster}} - {{instance}} - {{destination}}"}],"title":"Top topics by consumers","type":"bargauge"},{"datasource":{"uid":"${prometheus_datasource}"},"description":"Average message size on topic destinations.","fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisCenteredZero":false,"axisColorMode":"text","axisLabel":"","axisPlacement":"auto","axisShow":false,"axisSoftMin":0,"barAlignment":0,"drawStyle":"line","fillOpacity":25,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"insertNulls":false,"lineInterpolation":"smooth","lineWidth":2,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"never","spanNulls":false,"stacking":{"group":"A","mode":"normal"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"min":0,"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null}]},"unit":"decbytes"},"overrides":[]},"gridPos":{"h":8,"w":12,"x":12,"y":20},"id":11,"options":{"legend":{"calcs":[],"displayMode":"list","placement":"right","showLegend":true},"tooltip":{"mode":"multi","sort":"desc"}},"targets":[{"datasource":{"uid":"${prometheus_datasource}"},"expr":"topk by(instance, activemq_cluster, job) ($k_selector, activemq_topic_average_message_size{job=~\"$job\", cluster=~\"$cluster\", activemq_cluster=~\"$activemq_cluster\", instance=~\"$instance\", destination!~\"ActiveMQ.Advisory.*\", destination=~\".*$name.*\"})","format":"time_series","intervalFactor":2,"legendFormat":"{{activemq_cluster}} - {{instance}} - {{destination}}"}],"title":"Top topics by average message size","type":"timeseries"},{"datasource":{"uid":"${prometheus_datasource}"},"description":"Summary of topics showing topic name, enqueue and dequeue rate, average enqueue time, and average message size.","fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"custom":{"align":"left","cellOptions":{"type":"auto"},"inspect":false},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green"}]}},"overrides":[{"matcher":{"id":"byName","options":"Enqueue rate"},"properties":[{"id":"unit","value":"mps"}]},{"matcher":{"id":"byName","options":"Dequeue rate"},"properties":[{"id":"unit","value":"mps"}]},{"matcher":{"id":"byName","options":"Average enqueue time"},"properties":[{"id":"unit","value":"ms"}]},{"matcher":{"id":"byName","options":"Average message size"},"properties":[{"id":"unit","value":"decbytes"}]},{"matcher":{"id":"byName","options":"ActiveMQ cluster"},"properties":[{"id":"links","value":[{"title":"Cluster link","url":"d/apache-activemq-cluster-overview?var-activemq_cluster=${__data.fields.activemq_cluster}\u0026${__url_time_range}\u0026var-datasource=${datasource}"}]}]},{"matcher":{"id":"byName","options":"Instance"},"properties":[{"id":"links","value":[{"title":"Instance link","url":"d/apache-activemq-instance-overview?var-instance=${__data.fields.instance}\u0026${__url_time_range}\u0026var-datasource=${datasource}"}]}]}]},"gridPos":{"h":8,"w":24,"x":0,"y":28},"id":12,"options":{"cellHeight":"sm","footer":{"countRows":false,"fields":"","reducer":["sum"],"show":false},"showHeader":true},"pluginVersion":"10.2.0-60139","targets":[{"datasource":{"uid":"${prometheus_datasource}"},"expr":"rate(activemq_topic_enqueue_count{job=~\"$job\", cluster=~\"$cluster\", activemq_cluster=~\"$activemq_cluster\", instance=~\"$instance\", destination!~\"ActiveMQ.Advisory.*\", destination=~\".*$name.*\"}[$__rate_interval])","format":"table","intervalFactor":2,"legendFormat":"{{instance}}"},{"datasource":{"uid":"${prometheus_datasource}"},"expr":"rate(activemq_topic_dequeue_count{job=~\"$job\", cluster=~\"$cluster\", activemq_cluster=~\"$activemq_cluster\", instance=~\"$instance\", destination!~\"ActiveMQ.Advisory.*\", destination=~\".*$name.*\"}[$__rate_interval])","format":"table","intervalFactor":2,"legendFormat":"{{instance}}"},{"datasource":{"uid":"${prometheus_datasource}"},"expr":"activemq_topic_average_enqueue_time{job=~\"$job\", cluster=~\"$cluster\", activemq_cluster=~\"$activemq_cluster\", instance=~\"$instance\", destination!~\"ActiveMQ.Advisory.*\", destination=~\".*$name.*\"}","format":"table","intervalFactor":2,"legendFormat":"{{instance}}"},{"datasource":{"uid":"${prometheus_datasource}"},"expr":"activemq_topic_average_message_size{job=~\"$job\", cluster=~\"$cluster\", activemq_cluster=~\"$activemq_cluster\", instance=~\"$instance\", destination!~\"ActiveMQ.Advisory.*\", destination=~\".*$name.*\"}","format":"table","intervalFactor":2,"legendFormat":"{{instance}}"}],"title":"Topic summary","transformations":[{"id":"joinByField","options":{"byField":"destination","mode":"outer"}},{"id":"organize","options":{"indexByName":{},"renameByName":{"Time 3":"","Value #A":"Enqueue rate","Value #B":"Dequeue rate","Value #C":"Average enqueue time","Value #D":"Average message size","activemq_cluster 1":"ActiveMQ cluster","destination":"Destination","instance 1":"Instance"}}},{"id":"filterFieldsByName","options":{"include":{"names":["ActiveMQ cluster","Instance","Enqueue rate","Dequeue rate","Average enqueue time","Average message size","Destination"]}}}],"type":"table"}],"refresh":"30s","rows":[],"schemaVersion":14,"style":"dark","tags":["apache-activemq-integration"],"templating":{"list":[{"current":{},"hide":0,"label":"Data source","name":"prometheus_datasource","options":[],"query":"prometheus","refresh":1,"regex":"(?!grafanacloud-usage|grafanacloud-ml-metrics).+","type":"datasource"},{"allValue":".+","current":{},"datasource":{"uid":"${prometheus_datasource}"},"hide":0,"includeAll":true,"label":"Job","multi":true,"name":"job","options":[],"query":"label_values(activemq_topic_producer_count,job)","refresh":2,"regex":"","sort":0,"tagValuesQuery":"","tags":[],"tagsQuery":"","type":"query","useTags":false},{"allValue":".*","current":{},"datasource":{"uid":"${prometheus_datasource}"},"hide":0,"includeAll":true,"label":"Cluster","multi":true,"name":"cluster","options":[],"query":"label_values(activemq_memory_usage_ratio{job=~\"$job\"},cluster)","refresh":2,"regex":"","sort":0,"tagValuesQuery":"","tags":[],"tagsQuery":"","type":"query","useTags":false},{"allValue":".+","current":{},"datasource":{"uid":"${prometheus_datasource}"},"hide":0,"includeAll":true,"label":"ActiveMQ cluster","multi":true,"name":"activemq_cluster","options":[],"query":"label_values(activemq_memory_usage_ratio{job=~\"$job\", cluster=~\"$cluster\"},activemq_cluster)","refresh":2,"regex":"","sort":0,"tagValuesQuery":"","tags":[],"tagsQuery":"","type":"query","useTags":false},{"allValue":".+","current":{},"datasource":{"uid":"${prometheus_datasource}"},"hide":0,"includeAll":true,"label":"Instance","multi":true,"name":"instance","options":[],"query":"label_values(activemq_topic_producer_count{job=~\"$job\", cluster=~\"$cluster\",activemq_cluster=~\"$activemq_cluster\"},instance)","refresh":2,"regex":"","sort":0,"tagValuesQuery":"","tags":[],"tagsQuery":"","type":"query","useTags":false},{"allValue":"","current":{"text":"4","value":"4"},"hide":0,"includeAll":false,"label":"Top topic count","multi":false,"name":"k_selector","options":[{"text":"2","value":"2"},{"text":"4","value":"4"},{"text":"6","value":"6"},{"text":"8","value":"8"},{"text":"10","value":"10"}],"query":"2,4,6,8,10","refresh":0,"type":"custom"},{"current":{"selected":false,"text":"","value":""},"label":"Topic by name","name":"name","query":"","type":"textbox"}]},"time":{"from":"now-30m","to":"now"},"timepicker":{"refresh_intervals":["5s","10s","30s","1m","5m","15m","30m","1h","2h","1d"],"time_options":["5m","15m","1h","6h","12h","24h","2d","7d","30d"]},"timezone":"default","title":"Apache ActiveMQ topic overview","uid":"apache-activemq-topic-overview","version":0},"folder_name":"Integration - Apache ActiveMQ","overwrite":true}]}
    ```

## Create the folders
- method POST
- path /api/folders
- body example:
    ```
    {"title":"Integration - Apache ActiveMQ","uid":"integration---apache-activemq"}
    ```
- expected:
    - code 200
    - body example
    ```
    {"id":224,"uid":"integration---apache-activemq","orgId":1,"title":"Integration - Apache ActiveMQ","url":"/dashboards/f/integration---apache-activemq/integration-apache-activemq","hasAcl":false,"canSave":true,"canEdit":true,"canAdmin":true,"canDelete":true,"createdBy":"clement2b5f","created":"2025-05-23T15:17:59Z","updatedBy":"clement2b5f","updated":"2025-05-23T15:17:59Z","version":1}
    ```

## Add the dashboard (Iterate for each dashboard of the integration)
- method POST
- path /api/dashboards/db
- body example:
    ```
    {"dashboard":{"__inputs":[],"__requires":[],"annotations":{"list":[]},"description":"","editable":false,"gnetId":null,"graphTooltip":0,"hideControls":false,"id":null,"links":[{"asDropdown":false,"icon":"external link","includeVars":true,"keepTime":true,"tags":["apache-activemq-integration"],"targetBlank":false,"title":"Other Apache ActiveMQ dashboards","type":"dashboards","url":""}],"panels":[{"datasource":{"type":"datasource","uid":"-- Mixed --"},"description":"Shows if metrics are being received for the selected time range.","fieldConfig":{"defaults":{"color":{"fixedColor":"text","mode":"fixed"},"mappings":[{"options":{"match":"null","result":{"color":"light-red","index":0,"text":"No metrics received - Check configuration"}},"type":"special"},{"options":{"from":0,"result":{"color":"light-red","index":1,"text":"Failed to collect metrics"},"to":0},"type":"range"},{"options":{"from":1,"result":{"color":"light-green","index":2,"text":"Receiving metrics"},"to":1000000},"type":"range"}],"noValue":"No data","unit":"string"}},"gridPos":{"h":2,"w":8,"x":0,"y":0},"options":{"colorMode":"background","graphMode":"none","reduceOptions":{"calcs":["lastNotNull"]}},"pluginVersion":"v10.0.0","targets":[{"datasource":{"type":"prometheus","uid":"$prometheus_datasource"},"expr":"sum(up{job=~\"$job\"})\n"}],"title":"Metrics","type":"stat"},{"datasource":{"type":"datasource","uid":"-- Mixed --"},"description":"Shows the timestamp of the latest metrics received for this integration in the last 24 hours.","fieldConfig":{"defaults":{"color":{"fixedColor":"text","mode":"fixed"},"noValue":"No data","unit":"dateTimeFromNow"}},"gridPos":{"h":2,"w":8,"x":8,"y":0},"options":{"colorMode":"background","graphMode":"none","reduceOptions":{"calcs":["lastNotNull"],"fields":"Time"}},"pluginVersion":"v10.0.0","targets":[{"datasource":{"type":"prometheus","uid":"$prometheus_datasource"},"expr":"sum(up{job=~\"$job\"})\n"}],"timeFrom":"now-24h","title":"Latest metrics received","type":"stat"},{"datasource":{"type":"datasource","uid":"-- Mixed --"},"description":"Shows the installed version of this integration.","fieldConfig":{"defaults":{"color":{"fixedColor":"text","mode":"fixed"},"noValue":"1.0.1","unit":"string"}},"gridPos":{"h":2,"w":8,"x":16,"y":0},"pluginVersion":"v10.0.0","title":"Integration version","type":"stat"},{"datasource":{"uid":"${prometheus_datasource}"},"description":"Number of clusters that are reporting metrics from ActiveMQ.","fieldConfig":{"defaults":{"color":{"mode":"fixed"},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null}]},"unit":"none"},"overrides":[]},"gridPos":{"h":4,"w":6,"x":0,"y":3},"id":2,"options":{"colorMode":"none","graphMode":"area","justifyMode":"auto","orientation":"auto","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"textMode":"auto"},"pluginVersion":"10.2.0-60139","targets":[{"datasource":{"uid":"${prometheus_datasource}"},"expr":"count (activemq_memory_usage_ratio{job=~\"$job\", cluster=~\"$cluster\", activemq_cluster=~\"$activemq_cluster\"})","format":"time_series","intervalFactor":2,"legendFormat":"__auto"}],"title":"Clusters","type":"stat"},{"datasource":{"uid":"${prometheus_datasource}"},"description":"Number of broker instances across clusters.","fieldConfig":{"defaults":{"color":{"mode":"fixed"},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null}]},"unit":"none"},"overrides":[]},"gridPos":{"h":4,"w":6,"x":6,"y":3},"id":3,"options":{"colorMode":"none","graphMode":"area","justifyMode":"auto","orientation":"auto","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"textMode":"auto"},"pluginVersion":"10.2.0-60139","targets":[{"datasource":{"uid":"${prometheus_datasource}"},"expr":"count (activemq_memory_usage_ratio{job=~\"$job\", cluster=~\"$cluster\", activemq_cluster=~\"$activemq_cluster\"})","format":"time_series","intervalFactor":2,"legendFormat":"__auto"}],"title":"Brokers","type":"stat"},{"datasource":{"uid":"${prometheus_datasource}"},"description":"Number of message producers active on destinations across clusters.","fieldConfig":{"defaults":{"color":{"mode":"fixed"},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null}]},"unit":"none"},"overrides":[]},"gridPos":{"h":4,"w":6,"x":12,"y":3},"id":4,"options":{"colorMode":"none","graphMode":"area","justifyMode":"auto","orientation":"auto","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"textMode":"auto"},"pluginVersion":"10.2.0-60139","targets":[{"datasource":{"uid":"${prometheus_datasource}"},"expr":"sum (activemq_queue_producer_count{job=~\"$job\", cluster=~\"$cluster\", activemq_cluster=~\"$activemq_cluster\"}) + sum (activemq_topic_producer_count{job=~\"$job\", cluster=~\"$cluster\", activemq_cluster=~\"$activemq_cluster\",destination!~\"ActiveMQ.Advisory.*\"})","format":"time_series","intervalFactor":2,"legendFormat":"__auto"}],"title":"Producers","type":"stat"},{"datasource":{"uid":"${prometheus_datasource}"},"description":"The number of consumers subscribed to destinations across clusters.","fieldConfig":{"defaults":{"color":{"mode":"fixed"},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null}]},"unit":"none"},"overrides":[]},"gridPos":{"h":4,"w":6,"x":18,"y":3},"id":5,"options":{"colorMode":"none","graphMode":"area","justifyMode":"auto","orientation":"auto","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"textMode":"auto"},"pluginVersion":"10.2.0-60139","targets":[{"datasource":{"uid":"${prometheus_datasource}"},"expr":"sum (activemq_queue_consumer_count{job=~\"$job\", cluster=~\"$cluster\", activemq_cluster=~\"$activemq_cluster\"}) + sum (activemq_topic_consumer_count{job=~\"$job\", cluster=~\"$cluster\", activemq_cluster=~\"$activemq_cluster\",destination!~\"ActiveMQ.Advisory.*\"})","format":"time_series","intervalFactor":2,"legendFormat":"__auto"}],"title":"Consumers","type":"stat"},{"datasource":{"uid":"${prometheus_datasource}"},"description":"Number of messages that have been sent to destinations in a cluster","fieldConfig":{"defaults":{"color":{"fixedColor":"#C8F2C2","mode":"palette-classic"},"custom":{"axisCenteredZero":false,"axisColorMode":"text","axisLabel":"","axisPlacement":"auto","axisShow":false,"barAlignment":0,"drawStyle":"line","fillOpacity":25,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"insertNulls":false,"lineInterpolation":"smooth","lineWidth":2,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"never","spanNulls":false,"stacking":{"group":"A","mode":"normal"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null}]},"unit":"none"},"overrides":[]},"gridPos":{"h":8,"w":12,"x":0,"y":9},"id":6,"options":{"legend":{"calcs":[],"displayMode":"list","placement":"right","showLegend":true},"tooltip":{"mode":"multi","sort":"desc"}},"targets":[{"datasource":{"uid":"${prometheus_datasource}"},"expr":"sum by (activemq_cluster, job) (increase(activemq_queue_enqueue_count{job=~\"$job\", cluster=~\"$cluster\", activemq_cluster=~\"$activemq_cluster\"}[$__interval:])) + sum by (activemq_cluster, job) (increase(activemq_topic_enqueue_count{job=~\"$job\", cluster=~\"$cluster\", activemq_cluster=~\"$activemq_cluster\", destination!~\"ActiveMQ.Advisory.*\"}[$__interval:]))","format":"time_series","interval":"1m","intervalFactor":2,"legendFormat":"{{activemq_cluster}}"}],"title":"Enqueue / $__interval","type":"timeseries"},{"datasource":{"uid":"${prometheus_datasource}"},"description":"Number of messages that have been acknowledged (and removed) from destinations in a cluster.","fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisCenteredZero":false,"axisColorMode":"text","axisLabel":"","axisPlacement":"auto","axisShow":false,"barAlignment":0,"drawStyle":"line","fillOpacity":25,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"insertNulls":false,"lineInterpolation":"smooth","lineWidth":2,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"never","spanNulls":false,"stacking":{"group":"A","mode":"normal"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null}]},"unit":"none"},"overrides":[]},"gridPos":{"h":8,"w":12,"x":12,"y":9},"id":7,"options":{"legend":{"calcs":[],"displayMode":"list","placement":"right","showLegend":true},"tooltip":{"mode":"multi","sort":"desc"}},"targets":[{"datasource":{"uid":"${prometheus_datasource}"},"expr":"sum by (activemq_cluster, job) (increase(activemq_queue_dequeue_count{job=~\"$job\", cluster=~\"$cluster\", activemq_cluster=~\"$activemq_cluster\"}[$__interval:])) + sum by (activemq_cluster, job) (increase(activemq_topic_dequeue_count{job=~\"$job\", cluster=~\"$cluster\", activemq_cluster=~\"$activemq_cluster\", destination!~\"ActiveMQ.Advisory.*\"}[$__interval:]))","format":"time_series","interval":"1m","intervalFactor":2,"legendFormat":"{{activemq_cluster}}"}],"title":"Dequeue / $__interval","type":"timeseries"},{"datasource":{"uid":"${prometheus_datasource}"},"description":"Average percentage of temporary memory used across clusters.","fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"mappings":[],"max":1,"min":0,"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"#EAB839","value":50},{"color":"red","value":70}]},"unit":"percentunit"},"overrides":[]},"gridPos":{"h":10,"w":8,"x":0,"y":17},"id":8,"options":{"displayMode":"gradient","minVizHeight":10,"minVizWidth":0,"orientation":"horizontal","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"showUnfilled":false,"text":{},"valueMode":"color"},"pluginVersion":"10.2.0-60139","targets":[{"datasource":{"uid":"${prometheus_datasource}"},"expr":"avg by (activemq_cluster, job) (activemq_temp_usage_ratio{job=~\"$job\", cluster=~\"$cluster\", activemq_cluster=~\"$activemq_cluster\"})","format":"time_series","intervalFactor":2,"legendFormat":"{{activemq_cluster}}"}],"title":"Average temporary memory usage","type":"bargauge"},{"datasource":{"uid":"${prometheus_datasource}"},"description":"Average percentage of store memory used across clusters.","fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"mappings":[],"max":1,"min":0,"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"#EAB839","value":50},{"color":"red","value":70}]},"unit":"percentunit"},"overrides":[]},"gridPos":{"h":10,"w":8,"x":8,"y":17},"id":9,"options":{"displayMode":"gradient","minVizHeight":10,"minVizWidth":0,"orientation":"horizontal","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"showUnfilled":false,"valueMode":"color"},"pluginVersion":"10.2.0-60139","targets":[{"datasource":{"uid":"${prometheus_datasource}"},"expr":"avg by (activemq_cluster, job) (activemq_store_usage_ratio{job=~\"$job\", cluster=~\"$cluster\", activemq_cluster=~\"$activemq_cluster\"})","format":"time_series","intervalFactor":2,"legendFormat":"{{activemq_cluster}}"}],"title":"Average store memory usage","type":"bargauge"},{"datasource":{"uid":"${prometheus_datasource}"},"description":"Average percentage of broker memory used across clusters.","fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"mappings":[],"max":1,"min":0,"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"#EAB839","value":50},{"color":"red","value":70}]},"unit":"percentunit"},"overrides":[]},"gridPos":{"h":10,"w":8,"x":16,"y":17},"id":10,"options":{"displayMode":"gradient","minVizHeight":10,"minVizWidth":0,"orientation":"horizontal","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"showUnfilled":false,"valueMode":"color"},"pluginVersion":"10.2.0-60139","targets":[{"datasource":{"uid":"${prometheus_datasource}"},"expr":"avg by (activemq_cluster, job) (activemq_memory_usage_ratio{job=~\"$job\", cluster=~\"$cluster\", activemq_cluster=~\"$activemq_cluster\"})","format":"time_series","intervalFactor":2,"legendFormat":"{{activemq_cluster}}"}],"title":"Average broker memory usage","type":"bargauge"}],"refresh":"30s","rows":[],"schemaVersion":14,"style":"dark","tags":["apache-activemq-integration"],"templating":{"list":[{"current":{},"hide":0,"label":"Data source","name":"prometheus_datasource","options":[],"query":"prometheus","refresh":1,"regex":"(?!grafanacloud-usage|grafanacloud-ml-metrics).+","type":"datasource"},{"allValue":".+","current":{},"datasource":{"uid":"${prometheus_datasource}"},"hide":0,"includeAll":true,"label":"Job","multi":true,"name":"job","options":[],"query":"label_values(activemq_topic_producer_count,job)","refresh":2,"regex":"","sort":0,"tagValuesQuery":"","tags":[],"tagsQuery":"","type":"query","useTags":false},{"allValue":".*","current":{},"datasource":{"uid":"${prometheus_datasource}"},"hide":0,"includeAll":true,"label":"Cluster","multi":true,"name":"cluster","options":[],"query":"label_values(activemq_memory_usage_ratio{job=~\"$job\", cluster=~\"$cluster\"},cluster)","refresh":2,"regex":"","sort":0,"tagValuesQuery":"","tags":[],"tagsQuery":"","type":"query","useTags":false},{"allValue":".+","current":{},"datasource":{"uid":"${prometheus_datasource}"},"hide":0,"includeAll":true,"label":"ActiveMQ cluster","multi":true,"name":"activemq_cluster","options":[],"query":"label_values(activemq_memory_usage_ratio{job=~\"$job\", cluster=~\"$cluster\"},activemq_cluster)","refresh":2,"regex":"","sort":0,"tagValuesQuery":"","tags":[],"tagsQuery":"","type":"query","useTags":false}]},"time":{"from":"now-30m","to":"now"},"timepicker":{"refresh_intervals":["5s","10s","30s","1m","5m","15m","30m","1h","2h","1d"],"time_options":["5m","15m","1h","6h","12h","24h","2d","7d","30d"]},"timezone":"default","title":"Apache ActiveMQ cluster overview","uid":"apache-activemq-cluster-overview","version":0},"folderUid":"integration---apache-activemq","overwrite":true,"message":"creating dashboard from the Cloud Connections plugin"}
    ```
- expected:
    - code 200
    - example body
    ```
    {"folderUid":"integration---apache-activemq","id":235,"slug":"apache-activemq-cluster-overview","status":"success","uid":"apache-activemq-cluster-overview","url":"/d/apache-activemq-cluster-overview/apache-activemq-cluster-overview","version":1}
    ```

## Install the integration
- method POST
- path /api/plugin-proxy/grafana-easystart-app/integrations-api-admin/integrations/{slug}/install
- parameters:
    - `{slug}` the integration
- body example:
    ```
    {"configuration":{"configurable_logs":{"logs_disabled":false},"configurable_alerts":{"alerts_disabled":false}}}
    ```
- expected:
    - code 204
    - no body

# Uninstall one integration
- method POST
- path /api/plugin-proxy/grafana-easystart-app/integrations-api-admin/integrations/{slug}/uninstall
- parameters:
    - `{slug}` the integration
- expected:
    - code 204
    - no body


> WARNING. I have a doubt that the webclient is actually the one deleting the folders